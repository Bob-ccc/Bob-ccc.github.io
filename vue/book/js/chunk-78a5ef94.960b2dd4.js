(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78a5ef94"],{"5a8f":function(t,o){t.exports="data:image/png;base64,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"},"857a":function(t,o,a){var s=a("1d80"),i=/"/g;t.exports=function(t,o,a,e){var r=String(s(t)),n="<"+o;return""!==a&&(n+=" "+a+'="'+String(e).replace(i,"&quot;")+'"'),n+">"+r+"</"+o+">"}},9911:function(t,o,a){"use strict";var s=a("23e7"),i=a("857a"),e=a("af03");s({target:"String",proto:!0,forced:e("link")},{link:function(t){return i(this,"a","href",t)}})},"99af":function(t,o,a){"use strict";var s=a("23e7"),i=a("d039"),e=a("e8b5"),r=a("861d"),n=a("7b0b"),c=a("50c4"),l=a("8418"),d=a("65f0"),k=a("1dde"),C=a("b622"),h=a("2d00"),u=C("isConcatSpreadable"),g=9007199254740991,b="Maximum allowed index exceeded",I=h>=51||!i((function(){var t=[];return t[u]=!1,t.concat()[0]!==t})),f=k("concat"),B=function(t){if(!r(t))return!1;var o=t[u];return void 0!==o?!!o:e(t)},v=!I||!f;s({target:"Array",proto:!0,forced:v},{concat:function(t){var o,a,s,i,e,r=n(this),k=d(r,0),C=0;for(o=-1,s=arguments.length;o<s;o++)if(e=-1===o?r:arguments[o],B(e)){if(i=c(e.length),C+i>g)throw TypeError(b);for(a=0;a<i;a++,C++)a in e&&l(k,C,e[a])}else{if(C>=g)throw TypeError(b);l(k,C++,e)}return k.length=C,k}})},af03:function(t,o,a){var s=a("d039");t.exports=function(t){return s((function(){var o=""[t]('"');return o!==o.toLowerCase()||o.split('"').length>3}))}},c84b:function(t,o,a){"use strict";a.r(o);var s=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"detail"},[s("van-nav-bar",{ref:"toolbar",staticStyle:{background:"rgba(255, 255, 255, 0)"},attrs:{"left-arrow":"",fixed:""},on:{"click-left":t.back,"click-right":t.goBookrack},scopedSlots:t._u([{key:"right",fn:function(){return[s("van-icon",{attrs:{name:"bar-chart-o",size:"18"}})]},proxy:!0}])}),s("div",{staticClass:"book-info"},[s("div",{staticClass:"info-box clearfix"},[s("div",{staticClass:"book-text fl"},[s("div",{staticClass:"book-title"},[t._v(t._s(t.bookDetail.title))]),s("div",{staticClass:"book-author"},[t._v("作者："+t._s(t.bookDetail.author))]),s("div",{staticClass:"book-type"},[t._v(t._s(t.bookDetail.minorCateV2)+" · "+t._s(t.bookDetail.allowMonthly?"完结":"连载")+" · "+t._s(t.bookDetail.wordCount)+"万字")])]),s("div",{staticClass:"book-img fr"},[s("img",{staticClass:"auto-img",attrs:{src:t.bookDetail.cover,alt:""}})])])]),s("div",{staticClass:"book-hot"},[s("div",{staticClass:"book-score"},[s("span",[t._v(t._s(t.bookDetail.rating.score))]),s("span",[t._v("分")]),s("p",[t._v(t._s(t.bookDetail.rating.tip))])]),s("div",{staticClass:"book-retentionRatio"},[s("p",[s("span",[t._v(t._s(t.bookDetail.totalFollower))]),t._v("万人气 · "),s("span",[t._v(t._s(t.bookDetail.latelyFollower))]),t._v("万在读 ")]),s("p",[s("span",[t._v(t._s(t.bookDetail.retentionRatio))]),t._v("%读者留存 ")])])]),s("van-tabs",{attrs:{animated:"",swipeable:"","line-width":"15px",color:"#f99222"},on:{click:t.showActive},model:{value:t.active,callback:function(o){t.active=o},expression:"active"}},[s("van-tab",{staticClass:"detail-box",attrs:{title:"详情"}},[s("div",{staticClass:"book-shortIntro",class:{close:t.isClose},on:{click:t.toggleIsClose}},[s("div",{staticClass:"shortIntro-text"},[t._v(t._s(t.bookDetail.longIntro))]),s("div",{staticClass:"arrow"},[s("img",{staticClass:"auto-img",attrs:{src:a("5a8f"),alt:""}})])]),s("div",{staticClass:"book-directory",on:{click:t.goDirectory}},[t._v(" 查看目录 "),s("div",{staticClass:"book-lastChapter"},[t._v(t._s(t.bookDetail.allowMonthly?"已完结 共":"连载中 更新至")+t._s(t.bookDetail.chaptersCount)+"章")]),s("div",{staticClass:"book-updated"},[t._v(" "+t._s(t._f("formatDate")(t.bookDetail.updated,"yyyy-MM-dd"))+"更新 "),s("van-icon",{attrs:{name:"arrow"}})],1)])]),s("van-tab",{staticClass:"discuss-box",attrs:{title:"评论"}},[s("div",{staticClass:"discuss-list"},t._l(t.discussionsData,(function(o,a){return s("div",{key:a,staticClass:"discuss"},[s("div",{staticClass:"discuss-author"},[t._v(" "+t._s(o.author.nickname)+" ")]),s("div",{staticClass:"discuss-content"},[t._v(" "+t._s(o.title)+" ")]),s("div",{staticClass:"discuss-time"},[t._v(" "+t._s(t._f("formatDate")(o.updated,"yyyy-MM-dd hh:mm:ss"))+" ")])])})),0)])],1),s("div",{staticClass:"recommend-box"},[s("div",{staticClass:"about-box"},[s("h2",[t._v("相关推荐")]),s("span",{on:{click:t.changebooksData}},[t._v("换一批")])]),s("div",{staticClass:"recommend-books"},t._l(t.booksData,(function(o,a){return s("div",{key:a,staticClass:"book-box",on:{click:function(a){return t.goDetail(o._id)}}},[s("img",{staticClass:"auto-img",attrs:{src:o.cover,alt:""}}),s("div",{staticClass:"book-title"},[t._v(t._s(o.title))])])})),0)]),s("div",{staticClass:"btns-box"},[t.bookState.isAtClassify?s("div",{staticClass:"btn btn-addBookrack"},[t._v("已加入书架")]):s("div",{staticClass:"btn btn-addBookrack",on:{click:t.addClassify}},[t._v("加入书架")]),s("div",{staticClass:"btn btn-read",on:{click:t.goChapters}},[t._v(t._s(t.bookState.isReaded?"继续阅读":"开始阅读"))])])],1)},i=[],e=(a("99af"),a("d81d"),a("fb6a"),a("9911"),a("eadb"),{data:function(){return{offsetTop:0,active:0,bgc:"rgba(255, 255, 255, 0)",isSpread:!1,recommendData:[],booksData:[],isClose:!0,page:1,discussionsData:[]}},computed:{bookDetail:function(){return this.$store.state.detailStore.bookDetail},bookState:function(){var t=this,o={bookOrder:0,isAtClassify:!1,isReaded:!1,historyTitle:"无",time:""};return 0==this.$store.state.bookrackStore.historyData.length||this.$store.state.bookrackStore.historyData.map((function(a){t.bookDetail._id==a._id&&(o=a.bookState)})),o}},created:function(){this.getRecommendData(),this.getDirectoryList(),this.getDiscussions()},mounted:function(){var t=this,o=this.$refs.toolbar.$el;window.addEventListener("scroll",(function(){t.offsetTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;var a=1;a=Math.round(t.offsetTop/167*10)/10,o.style.background="rgba(255, 255, 255, "+a+")"}),!0)},methods:{back:function(){this.$router.go(-1)},goBookrack:function(){this.$router.push({name:"Bookrack"})},goDirectory:function(){this.$router.push({name:"Directory"})},getDirectoryList:function(){var t=this;this.isClose=!0,this.$toast.loading({message:"加载中...",forbidClick:!0,duration:1e3,loadingType:"spinner"}),this.axios({method:"GET",url:"/book-chapters/"+this.$store.state.detailStore.bookOriginId}).then((function(o){t.$toast.clear(),t.$store.dispatch("detailStore/setDirectoryListByLink",o.data.chapters)})).catch((function(o){t.$toast.clear()}))},getDiscussions:function(){var t=this;this.axios({method:"GET",url:"/book/discussions?&start=".concat(this.page,"&limit=10&book=").concat(this.bookDetail._id)}).then((function(o){t.discussionsData=o.data.posts}))},getRecommendData:function(){var t=this;this.axios({method:"GET",url:"/recommend/"+this.$store.state.detailStore.bookId}).then((function(o){t.recommendData=o.data.books,t.recommendData.map((function(t){t.cover=unescape(t.cover.slice(7))})),t.changebooksData()}))},goDetail:function(t){var o=this;window.scrollTo(0,0),this.$store.dispatch("detailStore/setBookIdListById",t),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios.all([this.axios({method:"GET",url:"/book-info/"+t}),this.axios({method:"GET",url:"/book-sources?view=summary&book="+t})]).then((function(t){o.$toast.clear(),o.$store.dispatch("detailStore/setBookDetail",t[0].data),o.$store.dispatch("detailStore/setBookOriginIdListById",t[1].data[0]._id),o.getDirectoryList()})).catch((function(t){o.$toast.clear()}))},changebooksData:function(){var t=Math.floor(Math.random()*(this.recommendData.length-2));this.booksData=this.recommendData.slice(t,t+3)},showActive:function(t,o){},toggleIsClose:function(){this.isClose=!this.isClose},setBookState:function(){var t=this;0!=this.$store.state.bookrackStore.historyData.length&&this.$store.state.bookrackStore.historyData.map((function(o){t.bookDetail._id!=o._id||(t.bookState=o.state)}))},goChapters:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"});var o=this.$store.state.detailStore.directoryList[this.bookState.bookOrder],a=o.link;this.$store.dispatch("chaptersStore/setChaptersList",o),this.axios({method:"GET",url:"/chapters/"+encodeURIComponent(a)}).then((function(o){t.$toast.clear(),t.$store.dispatch("chaptersStore/setChapterText",o.data.chapter);var a=Object.assign(t.bookState);a.historyTitle=t.$store.state.detailStore.directoryList[a.bookOrder].title,a.time=new Date,a.isReaded=!0,t.$store.dispatch("detailStore/setBookDetailBookState",a).then((function(o){t.$store.dispatch("bookrackStore/addHistoryData",o)})),t.$router.push({name:"Chapters"})}))},addClassify:function(){var t=this,o=Object.assign(this.bookState);o.isAtClassify=!0,this.$store.dispatch("detailStore/setBookDetailBookState",o).then((function(o){t.$store.dispatch("bookrackStore/addHistoryData",o)}))}}}),r=e,n=a("2877"),c=Object(n["a"])(r,s,i,!1,null,null,null);o["default"]=c.exports},eadb:function(t,o,a){}}]);
//# sourceMappingURL=chunk-78a5ef94.960b2dd4.js.map