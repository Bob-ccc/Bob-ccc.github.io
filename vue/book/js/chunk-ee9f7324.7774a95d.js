(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee9f7324"],{"3a60":function(t,e,i){},"857a":function(t,e,i){var a=i("1d80"),o=/"/g;t.exports=function(t,e,i,s){var r=String(a(t)),n="<"+e;return""!==i&&(n+=" "+i+'="'+String(s).replace(o,"&quot;")+'"'),n+">"+r+"</"+e+">"}},9911:function(t,e,i){"use strict";var a=i("23e7"),o=i("857a"),s=i("af03");a({target:"String",proto:!0,forced:s("link")},{link:function(t){return o(this,"a","href",t)}})},af03:function(t,e,i){var a=i("d039");t.exports=function(t){return a((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b125:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chapters",style:{backgroundColor:t.attributeData.bgc,color:t.attributeData.fontc}},[i("van-nav-bar",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],style:{backgroundColor:t.attributeData.toolc,color:t.attributeData.fontc},attrs:{"left-arrow":"",title:t.bookDetail.title,fixed:""},on:{"click-left":t.back}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"tool-box",style:{backgroundColor:t.attributeData.toolc}},[i("div",{staticClass:"changeOrder"},[i("div",{staticClass:"prev",on:{click:t.goPrevChapters}},[t._v("上一章")]),i("div",{staticClass:"next",on:{click:t.goNextChapters}},[t._v("下一章")])]),i("div",{staticClass:"btns"},[i("div",{staticClass:"btn directort",on:{click:t.showPopup}},[t._m(0),t._v("目录 ")]),i("div",{staticClass:"btn sunOrmoon",on:{click:t.changeSun}},[i("div",{staticClass:"icon"},[i("i",{class:t.isSun?"fa fa-moon-o":"fa fa-sun-o",attrs:{"aria-hidden":"true"}})]),t._v(" "+t._s(t.isSun?"夜间":"白天")+" ")]),i("div",{staticClass:"btn readSet",on:{click:t.readSet}},[t._m(1),t._v("阅读设置 ")])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isReadSet,expression:"isReadSet"}],staticClass:"readSet-box",style:{backgroundColor:t.attributeData.toolc}},[i("div",{staticClass:"font-size row"},[i("span",[t._v("字号")]),i("div",{staticClass:"row-btns"},[i("div",{staticClass:"btn-fontchange",on:{click:t.fontSizeDown}},[t._v("A-")]),i("span",[t._v(t._s(t.attributeData.fontSize))]),i("div",{staticClass:"btn-fontchange",on:{click:t.fontSizeUp}},[t._v("A+")])])]),i("div",{staticClass:"background-color row"},[i("span",[t._v("背景")]),i("div",{staticClass:"row-btns"},t._l(t.attributeData.bgColor,(function(e,a){return i("div",{key:a,staticClass:"btn-color",class:{active:e.active},style:{backgroundColor:e.bgc},on:{click:function(e){return t.changeBgc(a)}}},[i("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"item.active"}],attrs:{name:"success"}})],1)})),0)]),i("div",{staticClass:"line-height row"},[i("span",[t._v("间距")]),i("div",{staticClass:"row-btns"},[i("div",{staticClass:"btn-line",on:{click:t.lineHeightDown}},[i("i",{staticClass:"fa fa-bars",attrs:{"aria-hidden":"true"}}),i("i",{staticClass:"fa fa-long-arrow-down",attrs:{"aria-hidden":"true"}})]),i("div",{staticClass:"btn-line",on:{click:t.lineHeightUp}},[i("i",{staticClass:"fa fa-align-justify",attrs:{"aria-hidden":"true"}}),i("i",{staticClass:"fa fa-long-arrow-up",attrs:{"aria-hidden":"true"}})])])]),i("div",{staticClass:"change-way row"},[i("span",[t._v("翻页")]),i("div",{staticClass:"row-btns"},t._l(t.attributeData.changeWay,(function(e,a){return i("div",{key:a,staticClass:"btn-way",class:{active:e.active},on:{click:function(e){return t.changeWay(a)}}},[t._v(t._s(e.text))])})),0)]),i("div",{staticClass:"cancel",on:{click:t.showTool}},[t._v("取消")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isSideMole,expression:"isSideMole"}],staticClass:"showTool"},[i("div",{staticClass:"showTool-top",on:{click:t.prevPage}}),i("div",{staticClass:"showTool-bottom",on:{click:t.nextPage}}),i("div",{staticClass:"showTool-center",on:{click:t.showTool}})]),i("div",{staticClass:"chapters-title"},[i("p",[t._v(t._s(t.chapterText.title))])]),i("div",{ref:"viewBox",staticClass:"view-box",on:{click:t.showTool}},[i("div",{staticClass:"chapters-text"},t._l(t.chapterTextList,(function(e,a){return i("div",{key:a,staticClass:"chapters-item"},[i("h2",[t._v(t._s(e.title))]),t._l(e.cpContent,(function(e,a){return i("div",{key:a,staticClass:"book-chapTexts",style:{fontSize:t.attributeData.fontSize+"px",lineHeight:t.attributeData.lineHeight}},[t._v(t._s(e))])}))],2)})),0)]),i("div",{staticClass:"chapters-footer"},[i("div",{staticClass:"time"},[t._v(t._s(t._f("formatDate")(t.nowTime,"hh:mm:ss")))]),i("div",{staticClass:"range"},[t._v(t._s(t.bookState.bookOrder+1)+" / "+t._s(t.bookDetail.chaptersCount))])]),i("van-popup",{style:{height:"100%",width:"80%"},attrs:{position:"left"},model:{value:t.popShow,callback:function(e){t.popShow=e},expression:"popShow"}},[i("div",{staticClass:"popTop"},[i("h2",[t._v(t._s(t.bookDetail.title))]),i("div",{staticClass:"directory-sort"},[i("span",[t._v(t._s(t.bookDetail.allowMonthly?"已完结 共":"连载中 更新至")+t._s(t.bookDetail.chaptersCount)+"章")]),t.isSort?i("span",{on:{click:t.changeSort}},[i("van-icon",{attrs:{name:"ascending",size:"16px",color:"#f99222"}}),t._v("升序 ")],1):i("span",{on:{click:t.changeSort}},[i("van-icon",{attrs:{name:"descending",size:"16px",color:"#f99222"}}),t._v("降序 ")],1)])]),i("div",{staticClass:"popList"},[i("div",{ref:"poplist",staticClass:"poplist"},[i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,a){return i("van-cell",{key:a,class:a==t.bookState.bookOrder?"active":"",attrs:{title:e.title},on:{click:function(i){return t.goChapters(e)}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e.isVip?i("span",[i("van-icon",{attrs:{name:"lock"}})],1):i("span",{staticClass:"vip-text"},[t._v("免费")])]},proxy:!0}],null,!0)})})),1)],1)])])],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"icon"},[i("i",{staticClass:"fa fa-list",attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"icon"},[i("i",{staticClass:"fa fa-cog",attrs:{"aria-hidden":"true"}})])}],s=(i("d81d"),i("9911"),i("3a60"),{data:function(){return{chapterTextList:[],popShow:!1,isShow:!1,isReadSet:!1,isSun:!0,scrollTop:"",nowTime:new Date,attributeData:{fontSize:16,bgc:"#f6f6f6",fontc:"#000000",toolc:"#ffffff",bgColor:[{bgc:"#f6f6f6",fontc:"#000000",toolc:"#ffffff",active:!0},{bgc:"#dbe6c4",fontc:"#000000",toolc:"#ddfddf",active:!1},{bgc:"#f6d898",fontc:"#000000",toolc:"#feefee",active:!1},{bgc:"#e7e2c5",fontc:"#000000",toolc:"#eeeeee",active:!1},{bgc:"#463e3c",fontc:"#f6f6f6",toolc:"#666666",active:!1}],lineHeight:2,changeWay:[{text:"滑动",active:!0,way:!1},{text:"点击",active:!1,way:!0}]},isSort:!0,dirList:[],list:[],loading:!1,finished:!1,isSideMole:!1}},created:function(){var t=this;this.getNowTime(),this.chapterTextList.push(this.chapterText),this.directoryList.map((function(e){t.dirList.push(e)}))},computed:{chapterText:function(){return this.$store.state.chaptersStore.chapterText},chaptersList:function(){return this.$store.state.chaptersStore.chaptersList},chapterHistory:function(){return this.$store.state.chaptersStore.chapterHistory},bookDetail:function(){return this.$store.state.detailStore.bookDetail},bookState:function(){return this.$store.state.detailStore.bookDetail.bookState},directoryList:function(){return this.$store.state.detailStore.directoryList}},mounted:function(){var t=this;this.$refs.viewBox.addEventListener("scroll",(function(){var e=t.$refs["viewBox"];e.scrollHeight==e.scrollTop+e.offsetHeight&&t.getNextChapters(),t.scrollTop=e.scrollHeight,t.isShow=!1,t.isReadSet=!1}),!0)},methods:{back:function(){this.$router.go(-1)},showTool:function(){if(this.isReadSet)return this.isShow=!1,void(this.isReadSet=!1);this.isShow=!this.isShow,this.isReadSet=!1},prevPage:function(){var t=this.$refs["viewBox"];t.scrollTop-=.9*t.offsetHeight,t.scrollTop<=0&&(t.scrollTop=0)},nextPage:function(){var t=this.$refs["viewBox"];t.scrollTop+=.9*t.offsetHeight},readSet:function(){this.isReadSet=!0,this.isShow=!1},getNowTime:function(){var t=this;setInterval((function(){t.nowTime=new Date}),1e3)},getNextChapters:function(){var t=this;if(this.bookState.bookOrder+1>=this.$store.state.detailStore.directoryList.length)this.$toast("没有下一章了");else{var e=this.$store.state.detailStore.directoryList[this.bookState.bookOrder+1].link;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/chapters/"+encodeURIComponent(e)}).then((function(e){t.$toast.clear(),t.$store.dispatch("chaptersStore/setChapterText",e.data.chapter).then((function(e){t.chapterTextList.push(e);var i=t.bookState.bookOrder;i++;var a=Object.assign(t.bookState);a.bookOrder=i,a.historyTitle=t.chapterText.title,a.time=new Date,t.$store.dispatch("detailStore/setBookDetailBookState",a).then((function(e){t.$store.dispatch("bookrackStore/addHistoryData",e)})),t.$refs["viewBox"].scrollTop=t.scrollTop,t.$store.state.detailStore.directoryList.length}))}))}},goNextChapters:function(){var t=this;if(this.bookState.bookOrder+1>=this.$store.state.detailStore.directoryList.length)this.$toast("没有下一章了");else{var e=this.$store.state.detailStore.directoryList[this.bookState.bookOrder+1].link;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/chapters/"+encodeURIComponent(e)}).then((function(e){t.$toast.clear(),t.$store.dispatch("chaptersStore/setChapterText",e.data.chapter).then((function(e){t.chapterTextList=[],t.chapterTextList.push(e),t.$refs["viewBox"].scrollTop=0;var i=t.bookState.bookOrder;i++;var a=Object.assign(t.bookState);a.bookOrder=i,a.historyTitle=t.chapterText.title,a.time=new Date,t.$store.dispatch("detailStore/setBookDetailBookState",a).then((function(e){t.$store.dispatch("bookrackStore/addHistoryData",e)}))}))}))}},goPrevChapters:function(){var t=this;if(this.bookState.bookOrder<=0)this.$toast("没有上一章了");else{var e=this.$store.state.detailStore.directoryList[this.bookState.bookOrder-1].link;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/chapters/"+encodeURIComponent(e)}).then((function(e){t.$toast.clear(),t.$store.dispatch("chaptersStore/setChapterText",e.data.chapter).then((function(e){t.chapterTextList=[],t.chapterTextList.push(e),t.$refs["viewBox"].scrollTop=0;var i=t.bookState.bookOrder;i--;var a=Object.assign(t.bookState);a.bookOrder=i,a.historyTitle=t.chapterText.title,a.time=new Date,t.$store.dispatch("detailStore/setBookDetailBookState",a).then((function(e){t.$store.dispatch("bookrackStore/addHistoryData",e)}))}))}))}},fontSizeDown:function(){this.attributeData.fontSize<=12?this.$toast("字号已经最小了"):this.attributeData.fontSize--},fontSizeUp:function(){this.attributeData.fontSize>=40?this.$toast("字号已经最大了"):this.attributeData.fontSize++},lineHeightDown:function(){this.attributeData.lineHeight<=1?this.$toast("间距已经最小了"):this.attributeData.lineHeight-=.5},lineHeightUp:function(){this.attributeData.lineHeight>=3?this.$toast("间距已经最大了"):this.attributeData.lineHeight+=.5},changeBgc:function(t){this.changeActive(t,this.attributeData.bgColor,"主题已更换"),this.attributeData.bgc=this.attributeData.bgColor[t].bgc,this.attributeData.fontc=this.attributeData.bgColor[t].fontc,this.attributeData.toolc=this.attributeData.bgColor[t].toolc},changeActive:function(t,e,i){e[t].active||(e.map((function(t){t.active&&(t.active=!1)})),e[t].active=!0,this.$toast(i))},changeWay:function(t){this.changeActive(t,this.attributeData.changeWay,"已更换为"+this.attributeData.changeWay[t].text),this.isSideMole=this.attributeData.changeWay[t].way},changeSun:function(){this.isSun=!this.isSun,this.isSun?(this.changeBgc(0),this.$toast("白天模式")):(this.changeBgc(4),this.$toast("夜间模式"))},showPopup:function(){this.isShow=!1,this.popShow=!0},changeSort:function(){this.list=[],this.isSort=!this.isSort,this.dirList.reverse(),this.onLoad()},onLoad:function(){var t=this;setTimeout((function(){for(var e=0;e<30;e++)t.list.push(t.dirList[t.list.length]);t.loading=!1,t.list.length>=t.directoryList.length&&(t.finished=!0)}),500)},goChapters:function(t){var e=this,i=this.$store.state.detailStore.directoryList[t.order-1].link;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/chapters/"+encodeURIComponent(i)}).then((function(i){e.$toast.clear(),e.$store.dispatch("chaptersStore/setChapterText",i.data.chapter).then((function(i){e.popShow=!1,e.chapterTextList=[],e.chapterTextList.push(i),e.$refs["viewBox"].scrollTop=0;var a=Object.assign(e.bookState);a.bookOrder=t.order-1,a.historyTitle=e.chapterText.title,a.time=new Date,e.$store.dispatch("detailStore/setBookDetailBookState",a).then((function(t){e.$store.dispatch("bookrackStore/addHistoryData",t)}))}))}))}}}),r=s,n=i("2877"),c=Object(n["a"])(r,a,o,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-ee9f7324.7774a95d.js.map