{"version":3,"sources":["webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/modules/es.string.link.js","webpack:///./node_modules/core-js/internals/string-html-forced.js","webpack:///./src/views/Chapters.vue?c7f4","webpack:///src/views/Chapters.vue","webpack:///./src/views/Chapters.vue?6ca0","webpack:///./src/views/Chapters.vue"],"names":["requireObjectCoercible","quot","module","exports","string","tag","attribute","value","S","String","p1","replace","$","createHTML","forcedStringHTMLMethod","target","proto","forced","link","url","this","fails","METHOD_NAME","test","toLowerCase","split","length","render","_vm","_h","$createElement","_c","_self","staticClass","directives","name","rawName","expression","attrs","chapterText","title","on","back","isSideMole","showTool","_v","_s","ref","_l","item","index","key","v","i","staticRenderFns","data","chapterTextList","isShow","created","push","console","log","chaptersList","chapterHistory","computed","$store","state","chaptersStore","mounted","$refs","viewBox","addEventListener","methods","$router","go","getNextChapters","directoryList","$toast","loading","message","forbidClick","duration","loadingType","axios","method","encodeURIComponent","result","component"],"mappings":"8HAAA,IAAIA,EAAyB,EAAQ,QAEjCC,EAAO,KAIXC,EAAOC,QAAU,SAAUC,EAAQC,EAAKC,EAAWC,GACjD,IAAIC,EAAIC,OAAOT,EAAuBI,IAClCM,EAAK,IAAML,EAEf,MADkB,KAAdC,IAAkBI,GAAM,IAAMJ,EAAY,KAAOG,OAAOF,GAAOI,QAAQV,EAAM,UAAY,KACtFS,EAAK,IAAMF,EAAI,KAAOH,EAAM,M,kCCTrC,IAAIO,EAAI,EAAQ,QACZC,EAAa,EAAQ,QACrBC,EAAyB,EAAQ,QAIrCF,EAAE,CAAEG,OAAQ,SAAUC,OAAO,EAAMC,OAAQH,EAAuB,SAAW,CAC3EI,KAAM,SAAcC,GAClB,OAAON,EAAWO,KAAM,IAAK,OAAQD,O,qBCTzC,IAAIE,EAAQ,EAAQ,QAIpBnB,EAAOC,QAAU,SAAUmB,GACzB,OAAOD,GAAM,WACX,IAAIE,EAAO,GAAGD,GAAa,KAC3B,OAAOC,IAASA,EAAKC,eAAiBD,EAAKE,MAAM,KAAKC,OAAS,O,yCCPnE,IAAIC,EAAS,WAAa,IAAIC,EAAIR,KAASS,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,cAAc,CAACG,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAS7B,MAAOqB,EAAU,OAAES,WAAW,WAAWC,MAAM,CAAC,aAAa,GAAG,MAAQV,EAAIW,YAAYC,MAAM,MAAQ,IAAIC,GAAG,CAAC,aAAab,EAAIc,QAAQX,EAAG,MAAM,CAACG,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAS7B,OAAQqB,EAAIe,WAAYN,WAAW,gBAAgBJ,YAAY,WAAWQ,GAAG,CAAC,MAAQb,EAAIgB,YAAYb,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,IAAI,CAACH,EAAIiB,GAAGjB,EAAIkB,GAAGlB,EAAIW,YAAYC,YAAYT,EAAG,MAAM,CAACgB,IAAI,UAAUd,YAAY,WAAWQ,GAAG,CAAC,MAAQb,EAAIgB,WAAW,CAACb,EAAG,MAAM,CAACE,YAAY,iBAAiBL,EAAIoB,GAAIpB,EAAmB,iBAAE,SAASqB,EAAKC,GAAO,OAAOnB,EAAG,MAAM,CAACoB,IAAID,EAAMjB,YAAY,iBAAiB,CAACF,EAAG,KAAK,CAACH,EAAIiB,GAAGjB,EAAIkB,GAAGG,EAAKT,UAAUZ,EAAIoB,GAAIC,EAAc,WAAE,SAASG,EAAEC,GAAG,OAAOtB,EAAG,MAAM,CAACoB,IAAIE,EAAEpB,YAAY,kBAAkB,CAACL,EAAIiB,GAAGjB,EAAIkB,GAAGM,UAAS,MAAK,MAAM,IACx7BE,EAAkB,GCoBtB,G,oBAAA,CACEC,KADF,WAEI,MAAO,CACLC,gBAAiB,GACjBC,QAAQ,IAGZC,QAPF,WAQItC,KAAKoC,gBAAgBG,KAAKvC,KAAKmB,aAC/BqB,QAAQC,IAAI,iBAAkBzC,KAAKmB,aACnCqB,QAAQC,IAAI,kBAAmBzC,KAAK0C,cACpCF,QAAQC,IAAI,oBAAqBzC,KAAK2C,iBAExCC,SAAU,CACRrB,WADJ,WAEM,OAAOvB,KAAK6C,OAAOC,MAAMC,cAAcxB,YAEzCJ,YAJJ,WAKM,OAAOnB,KAAK6C,OAAOC,MAAMC,cAAc5B,aAEzCuB,aAPJ,WAQM,OAAO1C,KAAK6C,OAAOC,MAAMC,cAAcL,cAEzCC,eAVJ,WAWM,OAAO3C,KAAK6C,OAAOC,MAAMC,cAAcJ,iBAG3CK,QA3BF,WA2BA,WACIhD,KAAKiD,MAAMC,QAAQC,iBACvB,UACA,WACM,IAAN,qBACA,6CACQ,QAAR,WACQ,EAAR,sBAGA,IAGEC,QAAS,CAEP9B,KAFJ,WAGMtB,KAAKqD,QAAQC,IAAI,IAGnB9B,SANJ,WAOMxB,KAAKqC,QAAUrC,KAAKqC,QAItBkB,gBAXJ,WAWA,WAEM,GAAIvD,KAAK2C,gBAAkB3C,KAAK6C,OAAOC,MAAMU,cAAclD,OACzDN,KAAKyD,OAAO,cADd,CAIA,IAAN,4DACMjB,QAAQC,IAAI3C,GACZE,KAAKyD,OAAOC,QAAQ,CAClBC,QAAS,SACTC,aAAa,EACbC,SAAU,EACVC,YAAa,YAEf9D,KAAK+D,MAAM,CACTC,OAAQ,MACRjE,IAAK,aAAekE,mBAAmBnE,KAC/C,kBACQ,EAAR,eACQ0C,QAAQC,IAAIyB,GACZ,EAAR,OACA,wDACA,kBACU,EAAV,wBACU,QAAV,uBACU,IAAV,mBACU,IACV,wCACY,EAAZ,gECpGkV,I,YCO9UC,EAAY,eACd,EACA5D,EACA2B,GACA,EACA,KACA,KACA,MAIa,aAAAiC,E","file":"js/chunk-ee9f7324.edd49624.js","sourcesContent":["var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar quot = /\"/g;\n\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\n// https://tc39.github.io/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = String(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.link` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.link\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('link') }, {\n  link: function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  }\n});\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chapters\"},[_c('van-nav-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShow),expression:\"isShow\"}],attrs:{\"left-arrow\":\"\",\"title\":_vm.chapterText.title,\"fixed\":\"\"},on:{\"click-left\":_vm.back}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isSideMole),expression:\"!isSideMole\"}],staticClass:\"showTool\",on:{\"click\":_vm.showTool}}),_c('div',{staticClass:\"chapters-title\"},[_c('p',[_vm._v(_vm._s(_vm.chapterText.title))])]),_c('div',{ref:\"viewBox\",staticClass:\"view-box\",on:{\"click\":_vm.showTool}},[_c('div',{staticClass:\"chapters-text\"},_vm._l((_vm.chapterTextList),function(item,index){return _c('div',{key:index,staticClass:\"chapters-item\"},[_c('h2',[_vm._v(_vm._s(item.title))]),_vm._l((item.cpContent),function(v,i){return _c('div',{key:i,staticClass:\"book-chapTexts\"},[_vm._v(_vm._s(v))])})],2)}),0)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"chapters\">\r\n    <van-nav-bar v-show=\"isShow\" left-arrow :title=\"chapterText.title\" fixed @click-left=\"back\" />\r\n    <div class=\"showTool\" v-show=\"!isSideMole\" @click=\"showTool\"></div>\r\n    <div class=\"chapters-title\">\r\n      <p>{{chapterText.title}}</p>\r\n    </div>\r\n    <div class=\"view-box\" @click=\"showTool\" ref=\"viewBox\">\r\n      <div class=\"chapters-text\">\r\n        <div class=\"chapters-item\" v-for=\"(item,index) in chapterTextList\" :key=\"index\">\r\n          <h2>{{item.title}}</h2>\r\n          <div class=\"book-chapTexts\" v-for=\"(v,i) in item.cpContent\" :key=\"i\">{{v}}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"../assets/less/chapters.less\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      chapterTextList: [],\r\n      isShow: false,\r\n    };\r\n  },\r\n  created() {\r\n    this.chapterTextList.push(this.chapterText);\r\n    console.log(\"chapterText==>\", this.chapterText);\r\n    console.log(\"chaptersList==>\", this.chaptersList);\r\n    console.log(\"chapterHistory==>\", this.chapterHistory);\r\n  },\r\n  computed: {\r\n    isSideMole() {\r\n      return this.$store.state.chaptersStore.isSideMole;\r\n    },\r\n    chapterText() {\r\n      return this.$store.state.chaptersStore.chapterText;\r\n    },\r\n    chaptersList() {\r\n      return this.$store.state.chaptersStore.chaptersList;\r\n    },\r\n    chapterHistory() {\r\n      return this.$store.state.chaptersStore.chapterHistory;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.$refs.viewBox.addEventListener(\r\n      \"scroll\",\r\n      () => {\r\n        let box = this.$refs[\"viewBox\"];\r\n        if (box.scrollHeight == box.scrollTop + box.offsetHeight) {\r\n          console.log(\"到底了\");\r\n          this.getNextChapters();\r\n        }\r\n      },\r\n      true\r\n    );\r\n  },\r\n  methods: {\r\n    // 返回\r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n\r\n    showTool() {\r\n      this.isShow = !this.isShow;\r\n    },\r\n\r\n    // 获取下一章\r\n    getNextChapters() {\r\n      // console.log(this.$store.state.directoryList,this.chapterHistory,this.chapterText)\r\n      if (this.chapterHistory >= this.$store.state.directoryList.length) {\r\n        this.$toast(\"没有下一章了\");\r\n        return;\r\n      }\r\n      let link = this.$store.state.directoryList[this.chapterHistory].link;\r\n      console.log(link);\r\n      this.$toast.loading({\r\n        message: \"加载中...\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n        loadingType: \"spinner\",\r\n      });\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/chapters/\" + encodeURIComponent(link),\r\n      }).then((result) => {\r\n        this.$toast.clear();\r\n        console.log(result);\r\n        this.$store\r\n          .dispatch(\"chaptersStore/setChapterText\", result.data.chapter)\r\n          .then((res) => {\r\n            this.chapterTextList.push(res);\r\n            console.log(this.chapterTextList);\r\n            let order = this.chapterHistory;\r\n            order++;\r\n            if (order <= this.$store.state.directoryList.length) {\r\n              this.$store.dispatch(\"chaptersStore/setChapterHistory\", order);\r\n            }\r\n          });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chapters.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chapters.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chapters.vue?vue&type=template&id=5b3e0fc7&\"\nimport script from \"./Chapters.vue?vue&type=script&lang=js&\"\nexport * from \"./Chapters.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}