{"version":3,"sources":["webpack:///./src/assets/img/arrow.png","webpack:///./src/views/Detail.vue?7178","webpack:///src/views/Detail.vue","webpack:///./src/views/Detail.vue?73e2","webpack:///./src/views/Detail.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","staticStyle","attrs","on","back","_v","_s","bookDetail","title","author","minorCateV2","allowMonthly","wordCount","cover","rating","score","tip","totalFollower","latelyFollower","retentionRatio","showActive","model","value","callback","$$v","active","expression","class","isClose","toggleIsClose","longIntro","goDirectory","chaptersCount","_f","updated","changebooksData","_l","item","index","key","$event","goDetail","_id","goChapters","staticRenderFns","data","offsetTop","bgc","isSpread","recommendData","booksData","computed","$store","state","detailStore","created","getDirectoryList","getRecommendData","mounted","window","addEventListener","methods","$router","go","push","axios","method","url","bookOriginId","bookId","v","unescape","slice","console","log","scrollTo","dispatch","id","$toast","loading","message","forbidClick","duration","loadingType","num","length","name","historyData","localStorage","setItem","JSON","stringify","component"],"mappings":"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","file":"js/chunk-e166e0b4.f953b8bf.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAJqElEQVR4Xu2dz4+VVxnHn3OHmTs0JEIlxIVp4Q5pWrtwIZq40oUudKWB4J+gVOdOW4VFjeklTV0Utc6dCvon2EDrShe6aLoxEVy40NbIXLDpoiEImBDnF3OPGWIMoczMe597znvf9/1+WJ/nuef5fM9nHiaXhGD8gQAEtiUQYAMBCGxPAEF4HRDYgQCC8DwggCC8AQj4CLBBfNyoEiGAICJBM6aPAIL4uFElQgBBRIJmTB8BBPFxo0qEAIKIBM2YPgII4uNGlQgBBBEJmjF9BBDEx40qEQIIIhI0Y/oIIIiPG1UiBBBEJGjG9BFAEB83qkQIIIhI0IzpI4AgPm5UiRBAEJGgGdNHAEF83KgSIYAgIkEzpo8Agvi4USVCAEFEgmZMHwEE8XGjSoQAgogEzZg+Agji40aVCAEEEQmaMX0EEMTHjSoRAggiEjRj+gggiI8bVSIEEEQkaMb0EUAQHzeqRAggiEjQjOkjgCA+blSJEEAQkaAZ00cAQXzcqBIhgCAiQTOmjwCC+LhRJUIAQUSCZkwfAQTxcaNKhACCiATNmD4CCOLjRpUIAQQRCZoxfQQQxMeNKhECCCISNGP6CCCIjxtVIgQQRCRoxvQRQBAfN6pECCCISNCM6SOAID5uVIkQQBCRoBnTRwBBfNyoEiGAICJBM6aPAIL4uFElQgBBRIJmTB8BBPFxo0qEAIKIBM2YPgII4uNGlQiBiQiyujT3tVaMXxlGO2YhHg0WDprZjAhzxixGYD1avGkxXG0FuzIM4Q+z88u/K1aa7lSpgqwudl4MwebN7HC6EegkROB6jLY0uzD4WVkzlyLI+uLc56LFCxbs82UNxuc0mEC0y8HCqZmF5T/nnjK7IKuLna+HYG+ZWTv3MPTXIRCCrQ6Hdnx2YfDbnFNnFWTjjaNfHG4O37Vge3IOQW9NAsFsI7RaX5r+3tU/5iKQTZDY+/Ke9cc/+IuZfSbX5ekLATP728ytJz4beu/cy0EjmyDr/bmfRIvfz3FpekLgQQLBwk9nuss/yEEliyCrb3SeCkP7e44L0xMCjyIwE+2psDD4R2o6WQRZ7x9ZjBa6qS9LPwhsRyBY7M90ry2kJpRckPimTW181LkTzfalviz9ILC9IHZ3+lOD/eGkbaaklFyQtZ93jlvLLqa8JL0gUIjA0E60nx9cKnS24KHkgqz2O+eD2amCn88xCCQjEM0uzHYHzyVraGbJBVnrd/5kxjfmKUOiV2ECl9vdwRcKny5wMIcg/zKzxwt8NkcgkJrArXZ38MmUTXMIsvWFzVTKS9ILAgUJbLa7g6T/aiOHICtmNltwII5BICWB1XZ3sDdlwxyCXDWzuZSXpBcEChJYbncHRwueLXQsvSBLnYsW7XihT+cQBFISCHapPT84kbZlym5mtt6f+3a0+MvEbWkHgV0JBAvfmeku/2rXgyMcSL5Bbr9+eP9jU60bZjY9wj04CoFxCWz8Z3N46MAL1++M2+jB+uSCbDVf6x95zSycTnlRekFgZwLxXLt77UxqSlkEib94dt/a5sp7wezTqS9MPwg8TCCafdie2vtM+O5f76amk0WQ+1tkae4bFuPbqS9MPwh8jEAI32zPL/8mB5lsgmxddqM/d3po8bUcF6cnBLYItCycme4un8tFI6sgW5deWez0WsFezjUAfYUJBOu15wdncxLILgiS5IxPuHcJcmzRLUUQJBF+yDlGL0mOUgVBkhwvRbBniXKULgiSCD7olCOXLMdEBEGSlC9GqNcE5JiYIEgi9LBTjDohOSYqCJKkeDkCPSYox8QFQRKBBz7OiBOWoxKCIMk4L6jBtRWQozKCIEmDH7pntIrIUSlBkMTzkhpYUyE5KicIkjTwwY8yUsXkqKQgSDLKi2rQ2QrKUVlBkKRBD7/IKBWVo9KCIEmRl9WAMxWWo/KCIEkDBNhphIrLUQtBkKShktRAjtoIgiQNk6QmctRKECRpiCQ1kqN2giBJzSWpmRy1FARJaipJDeWorSBIUjNJaipHrQVBkppIUmM5ai8IklRckprL0QhBkKSikjRAjsYIgiQVk6QhcjRKECSpiCQNkqNxgiDJhCVpmByNFARJJiRJA+VorCBIUrIkDZWj0YIgSUmSNFiOxguCJJklabgcEoIgSSZJBOSQEQRJEksiIoeUIEiSSBIhOeQEQZIxJRGTQ1IQJHFKIiiHrCBIMqIkonJIC4IkBSURlkNeECTZRRJxORDkf+9jZbHTawV7ueDPVI1jyHE/59L+n/SqvyokeSAh5Pg/DAR54F0gyf0fmb32/OBs1X+glXU/BHmItLQkyPEx7xDkET+KJCVBjkcuJQTZZldLSYIc2/6NDUF2+MushCTIseOvMwiyy297jZYEOXb9XR9BdkVk1khJkKNA8nwPUghS475xR47CubNBCqNqyCZBjhESZ4OMBKv2mwQ5Rs6bDTIysppuEuRwJM0GcUGr3SZBDnfObBA3uppsEuQYI2E2yFjwKr9JkGPsfNkgYyOs6CZBjgTJskGSQKzcJkGOZLmyQZKhrMgmQY6EibJBksKc+CZBjuR5skGSI53QJkGODEmyQbJALX2TIEe2HNkg2dCWtEmQI2OCbJCscLNvEuTInh8bJDviPJtkGO3s3oVBr4TrS38EgpQU/1r/yEtm4dU0Hxd/2O5e+3GaXnTZiQCClPg+1haPnoxhuBTMDnk+NprdCLE13164+qannprRCSDI6MzGqojnnziwsbHnRzFY18ymCjbbDNH609P3XgnPfXC7YA3HEhBAkAQQPS3i64f3r01NfSuE+FWLdszMnnyozz8t2JUYw+/bm5u/Di9cv+P5HGrGI4Ag4/FLVh17tscOPv2J+w1vvv/v0LN7yZrTyE0AQdzoKFQggCAKKTOjmwCCuNFRqEAAQRRSZkY3AQRxo6NQgQCCKKTMjG4CCOJGR6ECAQRRSJkZ3QQQxI2OQgUCCKKQMjO6CSCIGx2FCgQQRCFlZnQTQBA3OgoVCCCIQsrM6CaAIG50FCoQQBCFlJnRTQBB3OgoVCCAIAopM6ObAIK40VGoQABBFFJmRjcBBHGjo1CBAIIopMyMbgII4kZHoQIBBFFImRndBBDEjY5CBQIIopAyM7oJIIgbHYUKBBBEIWVmdBNAEDc6ChUIIIhCyszoJoAgbnQUKhBAEIWUmdFNAEHc6ChUIIAgCikzo5sAgrjRUahAAEEUUmZGNwEEcaOjUIEAgiikzIxuAgjiRkehAgEEUUiZGd0EEMSNjkIFAgiikDIzugkgiBsdhQoEEEQhZWZ0E0AQNzoKFQj8F7hhMeeQ+rc1AAAAAElFTkSuQmCC\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"detail\"},[_c('van-nav-bar',{ref:\"toolbar\",staticStyle:{\"background\":\"rgba(255, 255, 255, 0)\"},attrs:{\"left-arrow\":\"\",\"fixed\":\"\"},on:{\"click-left\":_vm.back}}),_c('div',{staticClass:\"book-info\"},[_c('div',{staticClass:\"info-box clearfix\"},[_c('div',{staticClass:\"book-text fl\"},[_c('div',{staticClass:\"book-title\"},[_vm._v(_vm._s(_vm.bookDetail.title))]),_c('div',{staticClass:\"book-author\"},[_vm._v(\"作者：\"+_vm._s(_vm.bookDetail.author))]),_c('div',{staticClass:\"book-type\"},[_vm._v(_vm._s(_vm.bookDetail.minorCateV2)+\" · \"+_vm._s(_vm.bookDetail.allowMonthly?\"完结\":\"连载\")+\" · \"+_vm._s(_vm.bookDetail.wordCount)+\"万字\")])]),_c('div',{staticClass:\"book-img fr\"},[_c('img',{staticClass:\"auto-img\",attrs:{\"src\":_vm.bookDetail.cover,\"alt\":\"\"}})])])]),_c('div',{staticClass:\"book-hot\"},[_c('div',{staticClass:\"book-score\"},[_c('span',[_vm._v(_vm._s(_vm.bookDetail.rating.score))]),_c('span',[_vm._v(\"分\")]),_c('p',[_vm._v(_vm._s(_vm.bookDetail.rating.tip))])]),_c('div',{staticClass:\"book-retentionRatio\"},[_c('p',[_c('span',[_vm._v(_vm._s(_vm.bookDetail.totalFollower))]),_vm._v(\"万人气 · \"),_c('span',[_vm._v(_vm._s(_vm.bookDetail.latelyFollower))]),_vm._v(\"万在读 \")]),_c('p',[_c('span',[_vm._v(_vm._s(_vm.bookDetail.retentionRatio))]),_vm._v(\"%读者留存 \")])])]),_c('van-tabs',{attrs:{\"animated\":\"\",\"swipeable\":\"\",\"line-width\":\"15px\",\"color\":\"#f99222\"},on:{\"click\":_vm.showActive},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},[_c('van-tab',{staticClass:\"detail-box\",attrs:{\"title\":\"详情\"}},[_c('div',{staticClass:\"book-shortIntro\",class:{'close':_vm.isClose},on:{\"click\":_vm.toggleIsClose}},[_c('div',{staticClass:\"shortIntro-text\"},[_vm._v(_vm._s(_vm.bookDetail.longIntro))]),_c('div',{staticClass:\"arrow\"},[_c('img',{staticClass:\"auto-img\",attrs:{\"src\":require(\"../assets/img/arrow.png\"),\"alt\":\"\"}})])]),_c('div',{staticClass:\"book-directory\",on:{\"click\":_vm.goDirectory}},[_vm._v(\" 查看目录 \"),_c('div',{staticClass:\"book-lastChapter\"},[_vm._v(_vm._s(_vm.bookDetail.allowMonthly?\"已完结 共\":\"连载中 更新至\")+_vm._s(_vm.bookDetail.chaptersCount)+\"章\")]),_c('div',{staticClass:\"book-updated\"},[_vm._v(\" \"+_vm._s(_vm._f(\"formatDate\")(_vm.bookDetail.updated,'yyyy-MM-dd'))+\"更新 \"),_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)])]),_c('van-tab',{staticClass:\"discuss-box\",attrs:{\"title\":\"评论\"}},[_vm._v(\"评论\")])],1),_c('div',{staticClass:\"recommend-box\"},[_c('div',{staticClass:\"about-box\"},[_c('h2',[_vm._v(\"相关推荐\")]),_c('span',{on:{\"click\":_vm.changebooksData}},[_vm._v(\"换一批\")])]),_c('div',{staticClass:\"recommend-books\"},_vm._l((_vm.booksData),function(item,index){return _c('div',{key:index,staticClass:\"book-box\",on:{\"click\":function($event){return _vm.goDetail(item._id)}}},[_c('img',{staticClass:\"auto-img\",attrs:{\"src\":item.cover,\"alt\":\"\"}}),_c('div',{staticClass:\"book-title\"},[_vm._v(_vm._s(item.title))])])}),0)]),_c('div',{staticClass:\"btns-box\"},[_c('div',{staticClass:\"btn btn-addBookrack\"},[_vm._v(\" 加入书架 \")]),_c('div',{staticClass:\"btn btn-read\",on:{\"click\":_vm.goChapters}},[_vm._v(\" 开始阅读 \")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"detail\">\r\n    <van-nav-bar\r\n      ref=\"toolbar\"\r\n      style=\"background:rgba(255, 255, 255, 0)\"\r\n      left-arrow\r\n      fixed\r\n      @click-left=\"back\"\r\n    />\r\n    <div class=\"book-info\">\r\n      <div class=\"info-box clearfix\">\r\n        <div class=\"book-text fl\">\r\n          <div class=\"book-title\">{{bookDetail.title}}</div>\r\n          <div class=\"book-author\">作者：{{bookDetail.author}}</div>\r\n          <div\r\n            class=\"book-type\"\r\n          >{{bookDetail.minorCateV2}} · {{bookDetail.allowMonthly?\"完结\":\"连载\"}} · {{bookDetail.wordCount}}万字</div>\r\n        </div>\r\n        <div class=\"book-img fr\">\r\n          <img class=\"auto-img\" :src=\"bookDetail.cover\" alt />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"book-hot\">\r\n      <div class=\"book-score\">\r\n        <span>{{bookDetail.rating.score}}</span>\r\n        <span>分</span>\r\n        <p>{{bookDetail.rating.tip}}</p>\r\n      </div>\r\n      <div class=\"book-retentionRatio\">\r\n        <p>\r\n          <span>{{bookDetail.totalFollower}}</span>万人气 ·\r\n          <span>{{bookDetail.latelyFollower}}</span>万在读\r\n        </p>\r\n        <p>\r\n          <span>{{bookDetail.retentionRatio}}</span>%读者留存\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    <van-tabs\r\n      v-model=\"active\"\r\n      animated\r\n      swipeable\r\n      line-width=\"15px\"\r\n      color=\"#f99222\"\r\n      @click=\"showActive\"\r\n    >\r\n      <van-tab title=\"详情\" class=\"detail-box\">\r\n        <div class=\"book-shortIntro\" :class=\"{'close':isClose}\" @click=\"toggleIsClose\">\r\n          <div class=\"shortIntro-text\">{{bookDetail.longIntro}}</div>\r\n          <div class=\"arrow\">\r\n            <img class=\"auto-img\" src=\"../assets/img/arrow.png\" alt />\r\n          </div>\r\n        </div>\r\n        <div class=\"book-directory\" @click=\"goDirectory\">\r\n          查看目录\r\n          <div\r\n            class=\"book-lastChapter\"\r\n          >{{bookDetail.allowMonthly?\"已完结 共\":\"连载中 更新至\"}}{{bookDetail.chaptersCount}}章</div>\r\n          <div class=\"book-updated\">\r\n            {{bookDetail.updated | formatDate('yyyy-MM-dd')}}更新\r\n            <van-icon name=\"arrow\" />\r\n          </div>\r\n        </div>\r\n      </van-tab>\r\n      <van-tab title=\"评论\" class=\"discuss-box\">评论</van-tab>\r\n    </van-tabs>\r\n\r\n    <div class=\"recommend-box\">\r\n      <div class=\"about-box\">\r\n        <h2>相关推荐</h2>\r\n        <span @click=\"changebooksData\">换一批</span>\r\n      </div>\r\n      <div class=\"recommend-books\">\r\n        <div\r\n          class=\"book-box\"\r\n          v-for=\"(item,index) in booksData\"\r\n          :key=\"index\"\r\n          @click=\"goDetail(item._id)\"\r\n        >\r\n          <img class=\"auto-img\" :src=\"item.cover\" alt />\r\n          <div class=\"book-title\">{{item.title}}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"btns-box\">\r\n      <div class=\"btn btn-addBookrack\">\r\n        加入书架\r\n      </div>\r\n      <div class=\"btn btn-read\" @click=\"goChapters\">\r\n        开始阅读\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"../assets/less/detail.less\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      offsetTop: 0,\r\n      active: 0,\r\n      bgc: \"rgba(255, 255, 255, 0)\",\r\n      isSpread: false,\r\n      recommendData: [],\r\n      booksData: [],\r\n      isClose: true,\r\n    };\r\n  },\r\n  computed: {\r\n    // 书籍详情\r\n    bookDetail() {\r\n      return this.$store.state.detailStore.bookDetail;\r\n    },\r\n  },\r\n  created() {\r\n    this.getDirectoryList();\r\n    this.getRecommendData();\r\n  },\r\n  mounted() {\r\n    let toolbar = this.$refs.toolbar.$el;\r\n    window.addEventListener(\r\n      \"scroll\",\r\n      () => {\r\n        this.offsetTop =\r\n          window.pageYOffset ||\r\n          document.documentElement.scrollTop ||\r\n          document.body.scrollTop;\r\n        let opt = 1;\r\n        opt = Math.round((this.offsetTop / 167) * 10) / 10;\r\n        toolbar.style.background = \"rgba(255, 255, 255, \" + opt + \")\";\r\n      },\r\n      true\r\n    );\r\n  },\r\n  methods: {\r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n\r\n    // 前往目录\r\n    goDirectory() {\r\n      this.$router.push({ name: \"Directory\" });\r\n    },\r\n\r\n    // 书籍目录\r\n    getDirectoryList() {\r\n      this.isClose = true;\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/book-chapters/\" + this.$store.state.detailStore.bookOriginId,\r\n      })\r\n        .then((result) => {\r\n          this.$store.dispatch(\r\n            \"detailStore/setDirectoryListByLink\",\r\n            result.data.chapters\r\n          );\r\n        })\r\n        .catch((err) => {\r\n          this.$toast.clear();\r\n        });\r\n    },\r\n\r\n    // 获取推荐书籍\r\n    getRecommendData() {\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/recommend/\" + this.$store.state.detailStore.bookId,\r\n      }).then((result) => {\r\n        this.recommendData = result.data.books;\r\n        this.recommendData.map((v) => {\r\n          v.cover = unescape(v.cover.slice(7));\r\n        });\r\n        console.log(\"this.recommendData==>\", this.recommendData);\r\n        this.changebooksData();\r\n      });\r\n    },\r\n\r\n    // 点击书籍，根据书籍id获取书籍详情，前往书籍详情页面\r\n    goDetail(id) {\r\n      window.scrollTo(0, 0);\r\n      this.$store.dispatch(\"setBookIdListById\", id);\r\n      this.$toast.loading({\r\n        message: \"加载中...\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n        loadingType: \"spinner\",\r\n      });\r\n      this.axios\r\n        .all([\r\n          this.axios({\r\n            method: \"GET\",\r\n            url: \"/book-info/\" + id,\r\n          }),\r\n          this.axios({\r\n            method: \"GET\",\r\n            url: \"/book-sources?view=summary&book=\" + id,\r\n          }),\r\n        ])\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n          this.$store.dispatch(\"detailStore/setBookDetail\", result[0].data);\r\n          this.$store.dispatch(\r\n            \"detailStore/setBookOriginIdListById\",\r\n            result[1].data[0]._id\r\n          );\r\n          this.getDirectoryList();\r\n        })\r\n        .catch((err) => {\r\n          this.$toast.clear();\r\n        });\r\n    },\r\n\r\n    changebooksData() {\r\n      let num = Math.floor(Math.random() * (this.recommendData.length - 2));\r\n      this.booksData = this.recommendData.slice(num, num + 3);\r\n      console.log(num, this.recommendData.length, this.booksData);\r\n    },\r\n\r\n    showActive(name, title) {\r\n      console.log(name, title);\r\n    },\r\n\r\n    // 详情展开\r\n    toggleIsClose() {\r\n      this.isClose = !this.isClose;\r\n    },\r\n\r\n    // 前往阅读页面\r\n    goChapters(){\r\n      console.log(this.bookDetail)\r\n      this.$store.dispatch(\"bookrackStore/addHistoryData\",this.bookDetail)\r\n      let historyData = this.$store.state.bookrackStore.historyData;\r\n      console.log(historyData)\r\n      localStorage.setItem(\"BOOKHISTORY\", JSON.stringify(historyData));\r\n    }\r\n  \r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=59cda452&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}