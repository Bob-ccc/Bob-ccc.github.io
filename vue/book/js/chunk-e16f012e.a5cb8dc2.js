(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e16f012e"],{"5db0":function(t,a,i){},b288:function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"home"},[i("div",{staticClass:"search"},[i("van-icon",{attrs:{size:"24px",name:"search"},on:{click:t.goSearch}})],1),i("van-tabs",{staticClass:"tabs-box",attrs:{sticky:"","swipe-threshold":"3",animated:"",swipeable:"",route:"","title-inactive-color":"#999"},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},t._l(t.categoriesData,(function(a,e){return i("van-tab",{key:e,attrs:{title:a.tab}},[i("div",{staticClass:"content"},[i("div",{staticClass:"tuijian"},[i("h2",[t._v(t._s(a.title)+" "),i("span",{on:{click:function(a){return t.more(e)}}},[t._v("查看更多"),i("van-icon",{attrs:{name:"arrow"}})],1)]),i("div",{staticClass:"ranking-box clearfix"},[i("van-tabs",{staticClass:"ranking-tabs",on:{click:function(a){return t.setBookData(e)}},model:{value:a.active,callback:function(i){t.$set(a,"active",i)},expression:"item.active"}},t._l(a.data,(function(a,o){return i("van-tab",{key:o,attrs:{title:a.shortTitle}},[i("div",{staticClass:"books-box"},t._l(t.booksData[e],(function(a,e){return i("div",{key:e,staticClass:"book clearfix",on:{click:function(i){return t.goDetail(a._id)}}},[i("div",{staticClass:"book-img fl"},[i("img",{staticClass:"auto-img",attrs:{src:a.cover,alt:""}})]),i("div",{staticClass:"book-num fl"},[t._v(t._s(e+1))]),i("div",{staticClass:"book-text fl"},[i("div",{staticClass:"book-title"},[t._v(t._s(a.title))]),i("div",{staticClass:"book-hot"},[i("van-icon",{attrs:{name:"fire-o"}}),t._v(" "+t._s(a.latelyFollower)+" ")],1)])])})),0)])})),1)],1)])])])})),1)],1)},o=[],s=(i("d81d"),i("fb6a"),i("a434"),i("5db0"),{name:"Home",data:function(){return{active:0,categoriesData:{male:{tab:"男生",title:"排行榜",active:0,data:[]},female:{tab:"女生",title:"排行榜",active:0,data:[]},picture:{tab:"漫画",title:"排行榜",active:0,data:[]},epub:{tab:"出版",title:"排行榜",active:0,data:[]}},booksData:{epub:[],female:[],male:[],picture:[]}}},created:function(){this.getCategoriesData()},methods:{getCategoriesData:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/rank-category"}).then((function(a){for(var i in t.$toast.clear(),t.categoriesData)t.categoriesData[i].data=a.data[i].splice(0,4);t.setBookData()})).catch((function(a){t.$toast.clear()}))},getRankData:function(t){var a=this,i=[];return t.map((function(t){i.push(a.axios({method:"GET",url:"/rank/"+t}))})),this.axios.all(i)},setBookData:function(){var t=this,a=[];for(var i in this.categoriesData)a.push(this.categoriesData[i].data[this.categoriesData[i].active]._id);this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.getRankData(a).then((function(a){t.$toast.clear();var i=function(i){a.map((function(a){a.data.ranking.gender==i&&(a.data.ranking.books.sort((function(t,a){return a.latelyFollower-t.latelyFollower})),t.booksData[i]=a.data.ranking.books.splice(0,8),t.booksData[i].map((function(t){return[t.cover=unescape(t.cover.slice(7))]})))}))};for(var e in t.booksData)i(e)}))},more:function(t){this.$router.push({name:"Rank",query:{title:t}})},goDetail:function(t){var a=this;this.$store.dispatch("detailStore/setBookIdListById",t),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios.all([this.axios({method:"GET",url:"/book-info/"+t}),this.axios({method:"GET",url:"/book-sources?view=summary&book="+t})]).then((function(t){a.$toast.clear(),a.$store.dispatch("detailStore/setBookDetail",t[0].data),a.$store.dispatch("detailStore/setBookOriginIdListById",t[1].data[0]._id),a.$router.push({name:"Detail"})})).catch((function(t){a.$toast.clear()}))},goSearch:function(){this.$router.push({name:"Search"})}}}),n=s,r=i("2877"),c=Object(r["a"])(n,e,o,!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-e16f012e.a5cb8dc2.js.map