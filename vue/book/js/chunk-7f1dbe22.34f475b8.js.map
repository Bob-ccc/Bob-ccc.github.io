{"version":3,"sources":["webpack:///./src/views/Directory.vue?8dcc","webpack:///src/views/Directory.vue","webpack:///./src/views/Directory.vue?69ed","webpack:///./src/views/Directory.vue","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/modules/es.string.link.js","webpack:///./node_modules/core-js/internals/string-html-forced.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","bookDetail","title","on","back","_v","_s","allowMonthly","chaptersCount","changeSort","finished","onLoad","model","value","callback","$$v","loading","expression","_l","item","index","key","$event","goChapters","scopedSlots","_u","fn","proxy","staticRenderFns","data","dirList","list","isSort","created","directoryList","map","computed","$store","state","detailStore","methods","$router","go","reverse","setTimeout","$toast","message","forbidClick","duration","loadingType","dispatch","axios","method","url","encodeURIComponent","link","Object","assign","bookOrder","historyTitle","time","Date","isReaded","component","requireObjectCoercible","quot","module","exports","string","tag","attribute","S","String","p1","replace","$","createHTML","forcedStringHTMLMethod","target","proto","forced","fails","METHOD_NAME","test","toLowerCase","split","length"],"mappings":"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","file":"js/chunk-7f1dbe22.34f475b8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"directory\"},[_c('div',{staticClass:\"directory-top\"},[_c('van-nav-bar',{attrs:{\"left-arrow\":\"\",\"title\":_vm.bookDetail.title},on:{\"click-left\":_vm.back}}),_c('div',{staticClass:\"directory-sort\"},[_c('span',[_vm._v(_vm._s(_vm.bookDetail.allowMonthly?\"已完结 共\":\"连载中 更新至\")+_vm._s(_vm.bookDetail.chaptersCount)+\"章\")]),(_vm.isSort)?_c('span',{on:{\"click\":_vm.changeSort}},[_c('van-icon',{attrs:{\"name\":\"ascending\",\"size\":\"16px\",\"color\":\"#f99222\"}}),_vm._v(\"升序 \")],1):_c('span',{on:{\"click\":_vm.changeSort}},[_c('van-icon',{attrs:{\"name\":\"descending\",\"size\":\"16px\",\"color\":\"#f99222\"}}),_vm._v(\"降序 \")],1)])],1),_c('div',{staticClass:\"directory-list\"},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.list),function(item,index){return _c('van-cell',{key:index,attrs:{\"title\":item.title},on:{\"click\":function($event){return _vm.goChapters(item)}},scopedSlots:_vm._u([{key:\"right-icon\",fn:function(){return [(item.isVip)?_c('span',[_c('van-icon',{attrs:{\"name\":\"lock\"}})],1):_c('span',{staticClass:\"vip-text\"},[_vm._v(\"免费\")])]},proxy:true}],null,true)})}),1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"directory\">\r\n    <div class=\"directory-top\">\r\n      <van-nav-bar left-arrow :title=\"bookDetail.title\" @click-left=\"back\" />\r\n      <div class=\"directory-sort\">\r\n        <span>{{bookDetail.allowMonthly?\"已完结 共\":\"连载中 更新至\"}}{{bookDetail.chaptersCount}}章</span>\r\n        <span @click=\"changeSort\" v-if=\"isSort\">\r\n          <van-icon name=\"ascending\" size=\"16px\" color=\"#f99222\" />升序\r\n        </span>\r\n        <span @click=\"changeSort\" v-else>\r\n          <van-icon name=\"descending\" size=\"16px\" color=\"#f99222\" />降序\r\n        </span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"directory-list\">\r\n      <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\">\r\n        <van-cell\r\n          v-for=\"(item,index) in list\"\r\n          :key=\"index\"\r\n          :title=\"item.title\"\r\n          @click=\"goChapters(item)\"\r\n        >\r\n          <template #right-icon>\r\n            <span v-if=\"item.isVip\">\r\n              <van-icon name=\"lock\" />\r\n            </span>\r\n            <span class=\"vip-text\" v-else>免费</span>\r\n          </template>\r\n        </van-cell>\r\n      </van-list>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"../assets/less/directory.less\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      dirList: [],\r\n      list: [],\r\n      loading: false,\r\n      finished: false,\r\n      isSort: true,\r\n    };\r\n  },\r\n  created() {\r\n    this.directoryList.map((v) => {\r\n      this.dirList.push(v);\r\n    });\r\n  },\r\n  computed: {\r\n    bookDetail() {\r\n      return this.$store.state.detailStore.bookDetail;\r\n    },\r\n    directoryList() {\r\n      return this.$store.state.detailStore.directoryList;\r\n    },\r\n  },\r\n  methods: {\r\n    // 返回\r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n\r\n    // 改变排列顺序\r\n    changeSort() {\r\n      this.list = [];\r\n      this.isSort = !this.isSort;\r\n      this.dirList.reverse();\r\n      // console.log(this.$store.state.detailStore.directoryList);\r\n      this.onLoad();\r\n    },\r\n\r\n    // 懒加载\r\n    onLoad() {\r\n      // 异步更新数据\r\n      // setTimeout 仅做示例，真实场景中一般为 ajax 请求\r\n      setTimeout(() => {\r\n        for (let i = 0; i < 30; i++) {\r\n          this.list.push(this.dirList[this.list.length]);\r\n        }\r\n        // 加载状态结束\r\n        this.loading = false;\r\n        // 数据全部加载完成\r\n        if (this.list.length >= this.directoryList.length) {\r\n          this.finished = true;\r\n        }\r\n      }, 500);\r\n    },\r\n\r\n    // 点击章节\r\n    goChapters(item) {\r\n      this.$toast.loading({\r\n        message: \"加载中...\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n        loadingType: \"spinner\",\r\n      });\r\n\r\n      this.$store.dispatch(\"chaptersStore/setChaptersList\", item);\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/chapters/\" + encodeURIComponent(item.link),\r\n      }).then((result) => {\r\n        this.$toast.clear();\r\n\r\n        this.$store.dispatch(\r\n          \"chaptersStore/setChapterText\",\r\n          result.data.chapter\r\n        );\r\n        \r\n        // console.log(\"this.bookDetail.bookState\",this.bookDetail.bookState)\r\n        let state = {\r\n            isAtClassify: false,\r\n        }; \r\n        // console.log(state)\r\n        if (this.bookDetail.bookState) {\r\n          state = Object.assign(this.bookDetail.bookState);\r\n        } \r\n        // 设置书籍当前的阅读章数\r\n        state.bookOrder=item.order-1,\r\n        // 设置书籍当前的阅读标题\r\n        state.historyTitle = item.title;\r\n        // 记录本书籍当前阅读时间\r\n        state.time = new Date();\r\n        //isReaded属性更新为true\r\n        state.isReaded = true;\r\n        // 更新书籍信息\r\n        this.$store.dispatch(\"detailStore/setBookDetailBookState\", state);\r\n        // 更新阅读记录\r\n        this.$store.dispatch(\"bookrackStore/addHistoryData\", this.bookDetail);\r\n\r\n        this.$router.push({ name: \"Chapters\" });\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Directory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Directory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Directory.vue?vue&type=template&id=1b722d42&\"\nimport script from \"./Directory.vue?vue&type=script&lang=js&\"\nexport * from \"./Directory.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar quot = /\"/g;\n\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\n// https://tc39.github.io/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = String(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.link` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.link\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('link') }, {\n  link: function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  }\n});\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n"],"sourceRoot":""}