(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18b2b025"],{"789b":function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"classifyList"},[a("van-nav-bar",{ref:"toolbar",staticStyle:{background:"#ffffff"},attrs:{"left-arrow":"",title:t.major},on:{"click-left":t.back}}),a("van-tree-select",{attrs:{items:t.items,"active-id":t.activeId,"main-active-index":t.activeIndex},on:{"update:activeId":function(i){t.activeId=i},"update:active-id":function(i){t.activeId=i},"update:mainActiveIndex":function(i){t.activeIndex=i},"update:main-active-index":function(i){t.activeIndex=i},"click-nav":t.select},scopedSlots:t._u([{key:"content",fn:function(){return[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(i){t.loading=i},expression:"loading"}},t._l(t.list,(function(i,e){return a("div",{key:e,staticClass:"books",on:{click:function(a){return t.goDetail(i._id)}}},[a("div",{staticClass:"img-box"},[a("img",{staticClass:"auto-img",attrs:{src:i.cover,alt:""}})]),a("div",{staticClass:"text-box"},[a("div",{staticClass:"title-box"},[a("div",{staticClass:"title"},[t._v(t._s(i.title))]),a("div",{staticClass:"minorCate"},[t._v(t._s(i.minorCate))])]),a("div",{staticClass:"hot-box"},[a("div",{staticClass:"rankno"},[t._v(t._s(e+1))]),a("div",{staticClass:"latelyFollower"},[t._v(t._s(i.latelyFollower)+"热度")])])])])})),0)]},proxy:!0}])})],1)},s=[],o=(a("d81d"),a("fb6a"),a("d0c2"),{data:function(){return{items:[{text:"分组 1"},{text:"分组 2"}],activeId:1,activeIndex:0,booksData:[],list:[],loading:!1,finished:!1}},computed:{major:function(){var t=this.$route.query.title;return this.$store.state.rankStore.categoriesData[t].tab}},created:function(){this.setitems()},methods:{setitems:function(){var t=this,i=this.$store.state.rankStore.categoriesData[this.$route.query.title].data;this.items=[],i.map((function(i){t.items.push({text:i.shortTitle,id:i._id})})),this.booksData=i[0].booksData},back:function(){this.$router.go(-1)},onLoad:function(){var t=this;setTimeout((function(){for(var i=0;i<10;i++)t.list.push(t.booksData[t.list.length]);t.loading=!1,t.list.length>=t.booksData.length&&(t.finished=!0)}),1e3)},select:function(t){var i=this;this.booksData=[],this.list=[],this.loading=!0,this.finished=!1,this.$toast.loading({message:"加载中...",forbidClick:!0,duration:1e3,loadingType:"spinner"}),this.axios({method:"GET",url:"/rank/"+this.items[t].id}).then((function(t){i.$toast.clear(),i.booksData=t.data.ranking.books,i.booksData.map((function(t){t.cover=unescape(t.cover.slice(7))})),i.booksData.sort((function(t,i){return i.latelyFollower-t.latelyFollower})),i.onLoad()}))},goDetail:function(t){var i=this;this.$store.dispatch("detailStore/setBookIdListById",t),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios.all([this.axios({method:"GET",url:"/book-info/"+t}),this.axios({method:"GET",url:"/book-sources?view=summary&book="+t})]).then((function(t){i.$toast.clear(),i.$store.dispatch("detailStore/setBookDetail",t[0].data),i.$store.dispatch("detailStore/setBookOriginIdListById",t[1].data[0]._id),i.$router.push({name:"Detail"})})).catch((function(t){i.$toast.clear()}))}}}),n=o,l=a("2877"),c=Object(l["a"])(n,e,s,!1,null,null,null);i["default"]=c.exports},d0c2:function(t,i,a){}}]);
//# sourceMappingURL=chunk-18b2b025.9d9d36aa.js.map