(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-da98311c"],{6304:function(t,a,i){"use strict";i.r(a);var s=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"classifyList"},[i("van-nav-bar",{ref:"toolbar",staticStyle:{background:"#f6f6f6"},attrs:{"left-arrow":"",title:t.major},on:{"click-left":t.back}}),i("div",{staticClass:"classifyList-box"},[i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(a){t.loading=a},expression:"loading"}},t._l(t.ClassifyListData,(function(a,s){return i("div",{key:s,staticClass:"list-box",on:{click:function(i){return t.goDetail(a._id)}}},[i("div",{staticClass:"img-box"},[i("img",{staticClass:"auto-img",attrs:{src:a.cover,alt:""}})]),i("div",{staticClass:"text-box"},[i("div",{staticClass:"title-box"},[i("div",{staticClass:"title"},[t._v(t._s(a.title))]),i("div",{staticClass:"author"},[t._v("作者："+t._s(a.author))])]),i("div",{staticClass:"shorIntro"},[t._v(t._s(a.shortIntro))]),i("div",{staticClass:"tags"},[i("span",[t._v(t._s(a.retentionRatio)+"%留存")]),t._v(" "+t._s(a.tags)+" ")])])])})),0)],1)],1)},o=[],e=(i("99af"),i("a15b"),i("d81d"),i("fb6a"),i("a434"),i("f56f"),{data:function(){return{start:0,limit:5,step:5,major:"",loading:!1,finished:!1,ClassifyListData:[],list:[]}},created:function(){},methods:{back:function(){this.$router.go(-1)},getClassifyListData:function(){var t=this;console.log(this.$route.query);var a=this.$route.query.gender;this.major=this.$route.query.major,this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/category-info?gender=".concat(a,"&type=hot&major=").concat(this.major,"&start=").concat(this.start,"&limit=").concat(this.limit)}).then((function(a){if(t.$toast.clear(),t.loading=!1,t.start+=t.step,t.limit+=t.step,console.log(a),console.log(t.start,t.limit),a.data.books.length>=0){var i=a.data.books;i.map((function(a){a.cover=unescape(a.cover.slice(7)),a.tags.length>3?a.tags=a.tags.splice(0,4).join("·"):a.tags=a.tags.join("·"),t.ClassifyListData.push(a)}))}else t.finished=!0;console.log(t.ClassifyListData)})).catch((function(a){t.$toast.clear()}))},onLoad:function(){this.getClassifyListData()},goDetail:function(t){var a=this;this.$store.dispatch("detailStore/setBookIdListById",t),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios.all([this.axios({method:"GET",url:"/book-info/"+t}),this.axios({method:"GET",url:"/book-sources?view=summary&book="+t})]).then((function(t){a.$toast.clear(),a.$store.dispatch("detailStore/setBookDetail",t[0].data),a.$store.dispatch("detailStore/setBookOriginIdListById",t[1].data[0]._id),a.$router.push({name:"Detail"})})).catch((function(t){a.$toast.clear()}))}}}),n=e,r=i("2877"),c=Object(r["a"])(n,s,o,!1,null,null,null);a["default"]=c.exports},"99af":function(t,a,i){"use strict";var s=i("23e7"),o=i("d039"),e=i("e8b5"),n=i("861d"),r=i("7b0b"),c=i("50c4"),l=i("8418"),d=i("65f0"),u=i("1dde"),f=i("b622"),h=i("2d00"),g=f("isConcatSpreadable"),v=9007199254740991,b="Maximum allowed index exceeded",p=h>=51||!o((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),m=u("concat"),y=function(t){if(!n(t))return!1;var a=t[g];return void 0!==a?!!a:e(t)},k=!p||!m;s({target:"Array",proto:!0,forced:k},{concat:function(t){var a,i,s,o,e,n=r(this),u=d(n,0),f=0;for(a=-1,s=arguments.length;a<s;a++)if(e=-1===a?n:arguments[a],y(e)){if(o=c(e.length),f+o>v)throw TypeError(b);for(i=0;i<o;i++,f++)i in e&&l(u,f,e[i])}else{if(f>=v)throw TypeError(b);l(u,f++,e)}return u.length=f,u}})},a15b:function(t,a,i){"use strict";var s=i("23e7"),o=i("44ad"),e=i("fc6a"),n=i("a640"),r=[].join,c=o!=Object,l=n("join",",");s({target:"Array",proto:!0,forced:c||!l},{join:function(t){return r.call(e(this),void 0===t?",":t)}})},a640:function(t,a,i){"use strict";var s=i("d039");t.exports=function(t,a){var i=[][t];return!!i&&s((function(){i.call(null,a||function(){throw 1},1)}))}},f56f:function(t,a,i){}}]);
//# sourceMappingURL=chunk-da98311c.4841b0fd.js.map