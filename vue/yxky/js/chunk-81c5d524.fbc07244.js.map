{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./node_modules/core-js/internals/array-iteration.js","webpack:///./src/views/Order.vue?0980","webpack:///src/views/Order.vue","webpack:///./src/views/Order.vue?6ac1","webpack:///./src/views/Order.vue","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","this","match","error","bind","IndexedObject","toObject","toLength","arraySpeciesCreate","push","createMethod","TYPE","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","NO_HOLES","$this","callbackfn","that","specificCreate","value","result","O","self","boundFunction","length","index","create","target","undefined","module","exports","forEach","map","filter","some","every","find","findIndex","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","back","toggleTab","model","callback","$$v","active","expression","_l","v","ind","key","orderDatas","item","_v","_s","orderId","status","i","$event","goDetails","pid","smallImg","name","rule","enname","price","count","total","date","confirm","showPopup","goChange","goMenu","show","deleteOid","cancelPopup","deleteOrder","staticRenderFns","data","tabs","created","getOrderData","beforeRouteLeave","to","next","methods","$router","tokenString","$toast","loading","message","forbidClick","duration","loadingType","axios","method","url","params","appkey","oid","component","$","$map","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","proto","forced","arguments"],"mappings":"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","file":"js/chunk-81c5d524.fbc07244.js","sourcesContent":["var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else if (IS_EVERY) return false;  // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.github.io/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6)\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":\"订单中心\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.back}}),_c('div',{staticClass:\"tab-box\"},[_c('van-tabs',{attrs:{\"color\":\"#0C34BA\",\"title-active-color\":\"#0C34BA\"},on:{\"click\":_vm.toggleTab},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},_vm._l((_vm.tabs),function(v,ind){return _c('van-tab',{key:ind,attrs:{\"title\":v}},[(_vm.orderDatas[0])?_c('div',{staticClass:\"order-box\"},_vm._l((_vm.orderDatas),function(item,index){return _c('div',{key:index,staticClass:\"order-item\"},[_c('div',{staticClass:\"order-item-header clearfix\"},[_c('div',{staticClass:\"fl\"},[_vm._v(_vm._s(item.orderId))]),(item.status == 1)?_c('div',{staticClass:\"fr\"},[_vm._v(\"卖家已发货\")]):_c('div',{staticClass:\"fr\"},[_vm._v(\"交易成功\")])]),_c('div',{staticClass:\"order-item-pros\"},_vm._l((item.products),function(value,i){return _c('div',{key:i,staticClass:\"clearfix pro-card\"},[_c('div',{staticClass:\"fl pro-img\",on:{\"click\":function($event){return _vm.goDetails(value.pid)}}},[_c('img',{staticClass:\"auto-img\",attrs:{\"src\":value.smallImg,\"alt\":\"\"}})]),_c('div',{staticClass:\"card-info fr\"},[_c('div',{staticClass:\"pro-info\"},[_c('div',{staticClass:\"clearfix\"},[_c('div',{staticClass:\"fl pro-name\"},[_vm._v(_vm._s(value.name))]),_c('div',{staticClass:\"fl pro-rule\"},[_vm._v(_vm._s(value.rule))])]),_c('div',{staticClass:\"pro-enname\"},[_vm._v(_vm._s(value.enname))])]),_c('div',{staticClass:\"pro-price\"},[_c('div',{staticClass:\"pro-price-text\"},[_vm._v(\"￥\"+_vm._s(value.price))]),_c('div',{staticClass:\"pro-price-count\"},[_vm._v(\"x\"+_vm._s(value.count))])])])])}),0),_c('div',{staticClass:\"order-item-foot\"},[_c('div',{staticClass:\"item-total\"},[_c('div',{staticClass:\"item-count-text\"},[_vm._v(\"共 \"+_vm._s(item.count)+\"件商品\")]),_c('div',{staticClass:\"item-total-text\"},[_vm._v(\" 合计:￥ \"),_c('span',[_vm._v(_vm._s(item.total))])])]),_c('div',{staticClass:\"item-date\"},[_c('div',{},[_vm._v(_vm._s(item.date))]),_c('div',{},[(item.status == 1)?_c('div',{staticClass:\"text\"},[_c('van-button',{attrs:{\"color\":\"#0C34BA\",\"plain\":\"\",\"round\":\"\"},on:{\"click\":function($event){return _vm.confirm(item.orderId)}}},[_vm._v(\"确认收货\")])],1):_c('div',{staticClass:\"text-box-tab\"},[_c('div',{staticClass:\"finished fl\"},[_vm._v(\"已完成\")]),_c('div',{staticClass:\"remove fr\"},[_c('van-icon',{attrs:{\"size\":\"16px\",\"color\":\"#0C34BA\",\"name\":\"delete\"},on:{\"click\":function($event){return _vm.showPopup(item.orderId)}}})],1)])])])])])}),0):(_vm.active==2)?_c('div',[_c('van-empty',{attrs:{\"description\":\"订单信息为空\"}},[_c('van-button',{staticClass:\"bottom-button\",attrs:{\"round\":\"\",\"type\":\"danger\"},on:{\"click\":_vm.goChange}},[_vm._v(\"前往收货\")])],1)],1):_c('div',[_c('van-empty',{attrs:{\"description\":\"订单信息为空\"}},[_c('van-button',{staticClass:\"bottom-button\",attrs:{\"round\":\"\",\"type\":\"danger\"},on:{\"click\":_vm.goMenu}},[_vm._v(\"去下单\")])],1)],1)])}),1),_c('van-popup',{attrs:{\"round\":\"\"},model:{value:(_vm.show),callback:function ($$v) {_vm.show=$$v},expression:\"show\"}},[_c('div',{staticClass:\"popup-box\"},[_c('div',{staticClass:\"popup-text\"},[_c('p',[_vm._v(\"订单\"+_vm._s(_vm.deleteOid))]),_c('p',[_vm._v(\"确定要删除吗\")])]),_c('div',{staticClass:\"btns\"},[_c('div',{staticClass:\"btn btn-cancel\",on:{\"click\":_vm.cancelPopup}},[_vm._v(\"取消\")]),_c('div',{staticClass:\"btn btn-confirm\",on:{\"click\":_vm.deleteOrder}},[_vm._v(\"确定\")])])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"order\">\r\n    <van-nav-bar fixed title=\"订单中心\" left-text=\"返回\" left-arrow @click-left=\"back\" />\r\n    <div class=\"tab-box\">\r\n      <van-tabs v-model=\"active\" color=\"#0C34BA\" title-active-color=\"#0C34BA\" @click=\"toggleTab\">\r\n        <van-tab :title=\"v\" v-for=\"(v,ind) in tabs\" :key=\"ind\">\r\n          <div class=\"order-box\" v-if=\"orderDatas[0]\">\r\n            <div class=\"order-item\" v-for=\"(item, index) in orderDatas\" :key=\"index\">\r\n              <div class=\"order-item-header clearfix\">\r\n                <div class=\"fl\">{{item.orderId}}</div>\r\n                <div class=\"fr\" v-if=\"item.status == 1\">卖家已发货</div>\r\n                <div class=\"fr\" v-else>交易成功</div>\r\n              </div>\r\n              <div class=\"order-item-pros\">\r\n                <div class=\"clearfix pro-card\" v-for=\"(value, i) in item.products\" :key=\"i\">\r\n                  <div class=\"fl pro-img\" @click=\"goDetails(value.pid)\">\r\n                    <img class=\"auto-img\" :src=\"value.smallImg\" alt />\r\n                  </div>\r\n                  <div class=\"card-info fr\">\r\n                    <div class=\"pro-info\">\r\n                      <div class=\"clearfix\">\r\n                        <div class=\"fl pro-name\">{{value.name}}</div>\r\n                        <div class=\"fl pro-rule\">{{value.rule}}</div>\r\n                      </div>\r\n                      <div class=\"pro-enname\">{{value.enname}}</div>\r\n                    </div>\r\n                    <div class=\"pro-price\">\r\n                      <div class=\"pro-price-text\">￥{{value.price}}</div>\r\n                      <div class=\"pro-price-count\">x{{value.count}}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"order-item-foot\">\r\n                <div class=\"item-total\">\r\n                  <div class=\"item-count-text\">共 {{item.count}}件商品</div>\r\n                  <div class=\"item-total-text\">\r\n                    合计:￥\r\n                    <span>{{item.total}}</span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"item-date\">\r\n                  <div class>{{item.date}}</div>\r\n                  <div class>\r\n                    <div class=\"text\" v-if=\"item.status == 1\">\r\n                      <van-button color=\"#0C34BA\" plain round @click=\"confirm(item.orderId)\">确认收货</van-button>\r\n                    </div>\r\n                    <div class=\"text-box-tab\" v-else>\r\n                      <div class=\"finished fl\">已完成</div>\r\n                      <div class=\"remove fr\">\r\n                        <van-icon\r\n                          size=\"16px\"\r\n                          color=\"#0C34BA\"\r\n                          name=\"delete\"\r\n                          @click=\"showPopup(item.orderId)\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div v-else-if=\"active==2\">\r\n            <van-empty description=\"订单信息为空\">\r\n              <van-button round type=\"danger\" class=\"bottom-button\" @click=\"goChange\">前往收货</van-button>\r\n            </van-empty>\r\n          </div>\r\n          <div v-else>\r\n            <van-empty description=\"订单信息为空\">\r\n              <van-button round type=\"danger\" class=\"bottom-button\" @click=\"goMenu\">去下单</van-button>\r\n            </van-empty>\r\n          </div>\r\n        </van-tab>\r\n      </van-tabs>\r\n      <van-popup v-model=\"show\" round>\r\n        <div class=\"popup-box\">\r\n          <div class=\"popup-text\">\r\n            <p>订单{{deleteOid}}</p>\r\n            <p>确定要删除吗</p>\r\n          </div>\r\n          <div class=\"btns\">\r\n            <div class=\"btn btn-cancel\" @click=\"cancelPopup\">取消</div>\r\n            <div class=\"btn btn-confirm\" @click=\"deleteOrder\">确定</div>\r\n          </div>\r\n        </div>\r\n      </van-popup>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"../assets/css/order.less\";\r\nimport { utils } from \"../assets/js/utils\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      active: 1,\r\n      orderDatas: [],\r\n      tabs: [\"全部\", \"待收货\", \"已完成\"],\r\n      show: false,\r\n      deleteOid: \"\",\r\n    };\r\n  },\r\n  created() {\r\n    this.getOrderData(this.active);\r\n  },\r\n  beforeRouteLeave(to, from, next) {\r\n    if (to.name == \"Pay\") {\r\n       this.$router.go(-1);\r\n    }\r\n    next();\r\n  },\r\n  methods: {\r\n    back() {\r\n        this.$router.go(-1);\r\n    },\r\n    toggleTab() {\r\n      this.getOrderData(this.active);\r\n    },\r\n\r\n    goChange(){\r\n      this.active = 1\r\n      this.getOrderData(this.active)\r\n    },\r\n\r\n    goMenu() {\r\n      this.$router.push({ name: \"Menu\" });\r\n    },\r\n    //获取订单数据(其中 status 值为 0, 1, 2 ==> 0: 全部，1: 待收货，2: 已收货)\r\n    getOrderData(status) {\r\n      //status: 订单状态\r\n      //获取token字符串\r\n      let tokenString = localStorage.getItem(\"YXCFTK\");\r\n      if (!tokenString) {\r\n        return;\r\n      }\r\n\r\n      this.$toast.loading({\r\n        message: \"加载中...\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n        loadingType: \"spinner\",\r\n      });\r\n\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/findOrder\",\r\n        params: {\r\n          appkey: this.appkey,\r\n          tokenString,\r\n          status,\r\n        },\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n           \r\n          if (result.data.code == 70000) {\r\n            let orderData = {};\r\n\r\n            result.data.result.map((v) => {\r\n              if (!orderData[v.oid]) {\r\n                //如果不存在该订单数据，则初始化一个对象\r\n                orderData[v.oid] = {\r\n                  orderId: v.oid,\r\n\r\n                  date: utils.date(v.createdAt, \"yyyy-MM-dd hh:mm:ss\"),\r\n                  count: v.count,\r\n                  total: v.count * v.price,\r\n                  products: [v],\r\n                  status: v.status,\r\n                };\r\n              } else {\r\n                orderData[v.oid].count += v.count;\r\n                orderData[v.oid].total += v.count * v.price;\r\n                orderData[v.oid].products.push(v);\r\n              }\r\n            });\r\n            this.orderDatas = [];\r\n            let orderDatas = [];\r\n             \r\n\r\n            for (let key in orderData) {\r\n              orderDatas.push(orderData[key]);\r\n            }\r\n            //  \r\n\r\n            // 降序\r\n            orderDatas.sort((a, b) => {\r\n              return new Date(b.date).getTime() - new Date(a.date).getTime();\r\n            });\r\n\r\n             \r\n            let orderDoatasDonot = [];\r\n            let orderDoatasDone = [];\r\n\r\n            orderDatas.map((v) => {\r\n              if (v.status == 1) {\r\n                orderDoatasDonot.push(v);\r\n              } else {\r\n                orderDoatasDone.push(v);\r\n              }\r\n            });\r\n\r\n            this.orderDatas = this.orderDatas.concat(\r\n              orderDoatasDonot,\r\n              orderDoatasDone\r\n            );\r\n             \r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.$toast.clear();\r\n           \r\n        });\r\n    },\r\n\r\n    //点击商品图片前往商品详情页面\r\n    goDetails(pid){\r\n      this.$router.push({name:\"Details\",query:{pid}})\r\n    },\r\n\r\n    // 确认收货\r\n    confirm(oid) {\r\n      let tokenString = localStorage.getItem(\"YXCFTK\");\r\n      if (!tokenString) {\r\n        return;\r\n      }\r\n\r\n      this.$toast.loading({\r\n        message: \"加载中...\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n        loadingType: \"spinner\",\r\n      });\r\n\r\n      let data = utils.queryString({\r\n        appkey: this.appkey,\r\n        tokenString,\r\n        oid,\r\n      });\r\n\r\n      this.axios({\r\n        method: \"POST\",\r\n        url: \"/receive\",\r\n        data,\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n           \r\n          this.getOrderData(this.active);\r\n        })\r\n        .catch((err) => {\r\n          this.$toast.clear();\r\n           \r\n        });\r\n    },\r\n\r\n    // 显示删除弹出层\r\n    showPopup(oid) {\r\n      this.show = true;\r\n      this.deleteOid = oid;\r\n    },\r\n\r\n    // 取消按钮\r\n    cancelPopup() {\r\n      this.show = false;\r\n    },\r\n\r\n    // 确认删除订单\r\n    deleteOrder() {\r\n      let tokenString = localStorage.getItem(\"YXCFTK\");\r\n      if (!tokenString) {\r\n        return;\r\n      }\r\n\r\n      this.$toast.loading({\r\n        message: \"加载中...\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n        loadingType: \"spinner\",\r\n      });\r\n\r\n      let data = utils.queryString({\r\n        appkey: this.appkey,\r\n        tokenString,\r\n        oid: this.deleteOid,\r\n      });\r\n\r\n      this.axios({\r\n        method: \"POST\",\r\n        url: \"/removeOrder\",\r\n        data,\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n           \r\n          this.show = false;\r\n          this.getOrderData(this.active);\r\n        })\r\n        .catch((err) => {\r\n          this.$toast.clear();\r\n           \r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Order.vue?vue&type=template&id=06ade97c&\"\nimport script from \"./Order.vue?vue&type=script&lang=js&\"\nexport * from \"./Order.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}