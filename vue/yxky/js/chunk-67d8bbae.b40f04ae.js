(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67d8bbae"],{1276:function(t,a,i){"use strict";var e=i("d784"),n=i("44e7"),s=i("825a"),r=i("1d80"),o=i("4840"),c=i("8aa5"),l=i("50c4"),u=i("14c3"),d=i("9263"),p=i("d039"),h=[].push,f=Math.min,g=4294967295,v=!p((function(){return!RegExp(g,"y")}));e("split",2,(function(t,a,i){var e;return e="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var e=String(r(this)),s=void 0===i?g:i>>>0;if(0===s)return[];if(void 0===t)return[e];if(!n(t))return a.call(e,t,s);var o,c,l,u=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,v=new RegExp(t.source,p+"g");while(o=d.call(v,e)){if(c=v.lastIndex,c>f&&(u.push(e.slice(f,o.index)),o.length>1&&o.index<e.length&&h.apply(u,o.slice(1)),l=o[0].length,f=c,u.length>=s))break;v.lastIndex===o.index&&v.lastIndex++}return f===e.length?!l&&v.test("")||u.push(""):u.push(e.slice(f)),u.length>s?u.slice(0,s):u}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:a.call(this,t,i)}:a,[function(a,i){var n=r(this),s=void 0==a?void 0:a[t];return void 0!==s?s.call(a,n,i):e.call(String(n),a,i)},function(t,n){var r=i(e,t,this,n,e!==a);if(r.done)return r.value;var d=s(t),p=String(this),h=o(d,RegExp),b=d.unicode,m=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),k=new h(v?d:"^(?:"+d.source+")",m),y=void 0===n?g:n>>>0;if(0===y)return[];if(0===p.length)return null===u(k,p)?[p]:[];var C=0,S=0,x=[];while(S<p.length){k.lastIndex=v?S:0;var $,_=u(k,v?p:p.slice(S));if(null===_||($=f(l(k.lastIndex+(v?0:S)),p.length))===C)S=c(p,S,b);else{if(x.push(p.slice(C,S)),x.length===y)return x;for(var T=1;T<=_.length-1;T++)if(x.push(_[T]),x.length===y)return x;S=C=$}}return x.push(p.slice(C)),x}]}),!v)},"17bb":function(t,a,i){},"9f52":function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"details"},[i("div",{staticClass:"back"},[i("van-nav-bar",{attrs:{fixed:""},on:{"click-left":t.onClickLeft},scopedSlots:t._u([{key:"left",fn:function(){return[i("van-icon",{attrs:{name:"cross",size:"14"}})]},proxy:!0}])})],1),i("div",{staticClass:"pro-img"},[i("img",{staticClass:"auto-img",attrs:{src:t.productData.large_img,alt:""}})]),i("div",{staticClass:"pro-info"},[i("div",{staticClass:"pro-info-card"},[i("h2",{staticClass:"ch-name"},[t._v(" "+t._s(t.productData.name)+"( "),i("span",[t._v(t._s(t.productData.type_desc))]),t._v(") ")]),i("div",{staticClass:"en-name"},[t._v(t._s(t.productData.enname))]),t._l(t.productData.rules,(function(a,e){return i("div",{key:e,staticClass:"pro-selet"},[i("h2",[t._v(t._s(a.title)+":")]),i("div",{staticClass:"pro-selet-tabs"},t._l(a.rules,(function(a,n){return i("div",{key:n,staticClass:"pro-selet-tab",class:{active:a.isActive},on:{click:function(i){return t.seletTab(a,e)}}},[t._v(t._s(a.title))])})),0)])}))],2),i("div",{staticClass:"pro-info-card"},[i("div",{staticClass:"pro-desc"},[i("h2",[t._v("商品详情：")]),t._l(t.productData.desc,(function(a,e){return i("p",{key:e},[t._v(t._s(e+1)+"、"+t._s(a))])}))],2)])]),i("div",{staticClass:"pro-btn"},[i("van-goods-action",[i("div",{staticClass:"fl"},[i("div",{staticClass:"btn-price"},[t._v("￥"+t._s(t.productData.price))]),i("div",{staticClass:"btn-name"},[t._v(t._s(t.productData.name))])]),i("div",{staticClass:"fr"},[i("van-stepper",{attrs:{theme:"round","button-size":"20","disable-input":""},model:{value:t.count,callback:function(a){t.count=a},expression:"count"}})],1)]),i("van-goods-action",[i("van-goods-action-icon",{attrs:{color:t.isLike?"#0C34BA":"#cccccc",icon:"like",text:"喜欢"},on:{click:t.taggleLike}}),i("van-goods-action-icon",{attrs:{icon:"bag-o",text:"购物袋",badge:0==t.bagCount?"":t.bagCount,to:{name:"Shopbag"}}}),i("van-goods-action-button",{attrs:{color:"#be99ff",type:"warning",text:"加入购物袋"},on:{click:t.addShopbag}}),i("van-goods-action-button",{attrs:{color:"#0C34BA",type:"danger",text:"立即购买"},on:{click:t.buyNow}})],1)],1)])},n=[],s=(i("a15b"),i("d81d"),i("ac1f"),i("1276"),i("17bb"),i("2f14")),r={data:function(){return{pid:"",count:0,bagCount:0,isLike:!1,productData:{}}},created:function(){this.pid=this.$route.query.pid,this.getProductData(),this.findLike(),this.findShopbag()},methods:{getProductData:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/productDetail",params:{appkey:this.appkey,pid:this.pid}}).then((function(a){if(t.$toast.clear(),600==a.data.code){a.data.result[0].desc=a.data.result[0].desc.split(/\n/);var i=["tem","sugar","cream","milk"],e=[];i.map((function(t){if(""!=a.data.result[0][t]){var i={title:a.data.result[0][t+"_desc"],rules:[]},n=a.data.result[0][t].split("/");n.map((function(t,a){var e={title:t,isActive:0==a};i.rules.push(e)})),e.push(i)}})),a.data.result[0].rules=e,t.productData=a.data.result[0]}}))},findLike:function(){var t=this,a=localStorage.getItem("YXCFTK");a&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/findlike",params:{appkey:this.appkey,tokenString:a,pid:this.pid}}).then((function(a){t.$toast.clear(),1e3==a.data.code&&1==a.data.result.length&&(t.isLike=!0)})).catch((function(a){t.$toast.clear()})))},findShopbag:function(){var t=this,a=localStorage.getItem("YXCFTK");a&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/findAllShopcart",params:{appkey:this.appkey,tokenString:a}}).then((function(a){t.$toast.clear(),5e3==a.data.code?t.bagCount=a.data.result.length:t.$toast(a.data.msg)})).catch((function(a){t.$toast.clear()})))},onClickLeft:function(){this.$router.go(-1)},seletTab:function(t,a){if(!t.isActive){for(var i=this.productData.rules[a].rules,e=0;e<i.length;e++)if(i[e].isActive){i[e].isActive=!1;break}t.isActive=!0}},taggleLike:function(){var t=this,a=localStorage.getItem("YXCFTK");if(!a)return this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"});var i=s["a"].queryString({appkey:this.appkey,tokenString:a,pid:this.pid}),e=this.isLike?"/notlike":"/like";this.axios({method:"POST",url:e,data:i}).then((function(a){if(t.$toast.clear(),700==a.data.code)return t.$router.push({name:"Login"});t.$toast(a.data.msg),800==a.data.code?t.isLike=!0:900==a.data.code&&(t.isLike=!1)})).catch((function(t){}))},addShopbag:function(){var t=this,a=localStorage.getItem("YXCFTK");if(!a)return this.$router.push({name:"Login"});var i=this.productData.rules,e=[];i.map((function(t){for(var a=0;a<t.rules.length;a++)if(t.rules[a].isActive){e.push(t.rules[a].title);break}}));var n=s["a"].queryString({appkey:this.appkey,tokenString:a,pid:this.pid,count:this.count,rule:e.join("/")});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/addShopcart",data:n}).then((function(a){t.$toast.clear(),3e3==a.data.code&&1==a.data.status&&t.bagCount++,t.$toast(a.data.msg)})).catch((function(a){t.$toast.clear()}))},buyNow:function(){var t=this,a=localStorage.getItem("YXCFTK");if(!a)return this.$router.push({name:"Login"});var i=this.productData.rules,e=[];i.map((function(t){for(var a=0;a<t.rules.length;a++)if(t.rules[a].isActive){e.push(t.rules[a].title);break}}));var n=s["a"].queryString({appkey:this.appkey,tokenString:a,pid:this.pid,count:this.count,rule:e.join("/")});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/addShopcart",data:n}).then((function(a){t.$toast.clear(),3e3==a.data.code&&1==a.data.status&&t.bagCount++;var i=[];i.push(a.data.sid),i=JSON.stringify(i),"[]"!=i?t.$router.push({name:"Pay",query:{sids:i}}):t.$toast("请勾择商品")})).catch((function(a){t.$toast.clear()}))}}},o=r,c=i("2877"),l=Object(c["a"])(o,e,n,!1,null,"10b883ea",null);a["default"]=l.exports},a15b:function(t,a,i){"use strict";var e=i("23e7"),n=i("44ad"),s=i("fc6a"),r=i("a640"),o=[].join,c=n!=Object,l=r("join",",");e({target:"Array",proto:!0,forced:c||!l},{join:function(t){return o.call(s(this),void 0===t?",":t)}})},a640:function(t,a,i){"use strict";var e=i("d039");t.exports=function(t,a){var i=[][t];return!!i&&e((function(){i.call(null,a||function(){throw 1},1)}))}},b727:function(t,a,i){var e=i("0366"),n=i("44ad"),s=i("7b0b"),r=i("50c4"),o=i("65f0"),c=[].push,l=function(t){var a=1==t,i=2==t,l=3==t,u=4==t,d=6==t,p=5==t||d;return function(h,f,g,v){for(var b,m,k=s(h),y=n(k),C=e(f,g,3),S=r(y.length),x=0,$=v||o,_=a?$(h,S):i?$(h,0):void 0;S>x;x++)if((p||x in y)&&(b=y[x],m=C(b,x,k),t))if(a)_[x]=m;else if(m)switch(t){case 3:return!0;case 5:return b;case 6:return x;case 2:c.call(_,b)}else if(u)return!1;return d?-1:l||u?u:_}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},d81d:function(t,a,i){"use strict";var e=i("23e7"),n=i("b727").map,s=i("1dde"),r=i("ae40"),o=s("map"),c=r("map");e({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-67d8bbae.b40f04ae.js.map